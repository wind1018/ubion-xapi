{"version":3,"sources":["webpack://XAPI/./src/Config.ts","webpack://XAPI/./src/Profiles/MediaProfile.ts","webpack://XAPI/./src/Profiles/NavigationProfile.ts","webpack://XAPI/./src/Profiles/SessionProfile.ts","webpack://XAPI/./src/xAPIDictionary.ts","webpack://XAPI/./src/xAPIProfile.ts","webpack://XAPI/./src/xapiBuilder.ts","webpack://XAPI/./node_modules/uuid/dist/esm-browser/rng.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/regex.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/validate.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/v1.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/parse.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/v35.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/md5.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/v3.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/v4.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/sha1.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/v5.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/nil.js","webpack://XAPI/./node_modules/uuid/dist/esm-browser/version.js","webpack://XAPI/webpack/bootstrap","webpack://XAPI/webpack/runtime/define property getters","webpack://XAPI/webpack/runtime/hasOwnProperty shorthand","webpack://XAPI/webpack/runtime/make namespace object","webpack://XAPI/webpack/startup"],"names":["endpoint","key","secret","version","mediaSessionId","started","verbDict","dict","verb","filter","data","hasOwnProperty","activityDict","activityNames","resultExtensionsDict","extensions","result","contextExtensionsDict","context","validateVerbName","verbName","this","setVerb","id","_verb","display","console","log","validateActivityName","objectActivityName","toLocaleLowerCase","setActivity","objectID","definitionName","description","toLowerCase","objectType","undefined","Object","keys","length","_activity","definition","name","type","validateResult","flag","setResult","extension","ext","validateExtensionName","endPlayedSegment","setDuration","toFixed","_result","startPlayedSegment","validateContextName","setContext","_context","parseFloat","getCurrentVerb","getCurrentActivity","getCurrentResult","getCurrentContext","getCurrentResultExtension","getCurrentContextExtension","validateProfile","profile","initialized","played","paused","seeked","completed","terminated","interacted","start","end","arr","split","push","join","calculateDuration","arr2","duration","forEach","v","i","xAPIProfile","MediaProfile","iso8601RegExp","Date","toISOString","startDate","endDate","getTime","Math","abs","NavigationProfile","SessionProfile","xAPIDictionary","getVerb","getActivity","objectId","getResult","getContext","registrationVal","emailRegExp","RET_CODE","code","status","_profiles","initializeXAPI","resultCode","validateActivityData","setActor","e","_activityData","test","item","value","account","memberArray","memberObj","_actor","actorNameValue","teamMemberNamevalue","accountNameValue","instructorObj","teamObj","contextActivitiesObj","instructorNameValue","teamNameValue","teamMemberNameValue","accountNameKey","parentArray","parentNameKey","parentNameValue","parentDescriptionKey","parentDescriptionValue","parentArrayObj","groupingArray","groupingNameKey","groupingNameValue","groupingDescriptionKey","groupingDescriptionValue","groupingArrayObj","otherArray","otherNameKey","otherNameValue","otherDescriptionKey","otherDescriptionValue","otherArrayObj","setXAPIData","_actionData","verbDictSession","verbDictNavigation","verbDictMedia","validateActionData","getProfile","getStatement","_statement","_extensions","setAttachments","sessionProfileObjInMember","navigationProfileObjInMember","mediaProfileObjInMember","getConfigData","username","password","getStatementObj","profilesObj","mediaProfileObj","getMediaVerbReturn","getMediaActivityReturn","getMediaExtensionsReturn","getMediaResultReturn","sessionProfileObj","getSessionVerbReturn","getSessionActivityReturn","getSessionResultReturn","getSessionExtensionsReturn","navigationProfileObj","getNavigationVerbReturn","getNavigationActivityReturn","getNavigationResultReturn","getNavigationExtensionsReturn","statementObj","actor","mbox","object","getUuid","xAPIBuilder","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","uuid","byteToHex","toString","substr","offset","arguments","TypeError","_nodeId","_clockseq","_lastMSecs","_lastNSecs","options","buf","b","Array","node","clockseq","seedBytes","random","msecs","now","nsecs","dt","tl","tmh","n","parseInt","slice","hashfunc","generateUUID","namespace","str","unescape","encodeURIComponent","bytes","charCodeAt","stringToBytes","set","err","DNS","URL","getOutputLength","inputLength8","safeAdd","x","y","lsw","md5cmn","q","a","s","t","num","cnt","md5ff","c","d","md5gg","md5hh","md5ii","v35","msg","input","output","length32","hexTab","hex","charAt","md5ToHexEncodedArray","len","olda","oldb","oldc","oldd","wordsToMd5","length8","Uint32Array","bytesToWords","rnds","f","z","ROTL","K","H","isArray","prototype","call","l","N","ceil","M","_i","j","pow","floor","_i2","W","_t","_t2","T","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","o","defineProperty","enumerable","get","obj","prop","r","Symbol","toStringTag","__webpack_exports__"],"mappings":"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","file":"BUILDER.min.js","sourcesContent":["/**\r\n * 공통으로 사용하는 환경 설정 내용\r\n */\r\nconst Config = {\r\n    /** LRS Endpoint */\r\n    endpoint: 'http://211.193.3.74/data/xAPI/',\r\n    /** LRS Clients Key */\r\n    key: \"e9e89d0d650135c288a3c4e50dae38276be7d495\",\r\n    /** LRS Clients secret */\r\n    secret: \"49c77874bb6ac77b68bf0c40a25d94c82843ba87\",\r\n    /** ADL Version */\r\n    version: \"1.0.3\"\r\n}\r\n\r\nexport default Config;","import { xAPIProfile,Profile } from '../xAPIProfile';\r\n\r\n/**\r\n * media profile\r\n * + verb, activity, result, context, extension property에 대한 validation 처리\r\n * + validation 후 verb, activty, result, context, extension property 구성\r\n */\r\nexport class MediaProfile extends xAPIProfile  {\r\n    /** media play record */\r\n    public mediaSessionId :object = {};\r\n    /** media start flag */\r\n    private started = false;\r\n    private verbDict = this.dict.verb.filter(data => data.hasOwnProperty('media'));\r\n    private activityDict = this.dict.activityNames.filter(data => data.hasOwnProperty('media'));\r\n    private resultExtensionsDict = this.dict.extensions.result.filter(data => data.hasOwnProperty('media'));\r\n    private contextExtensionsDict = this.dict.extensions.context.filter(data => data.hasOwnProperty('media'));\r\n\r\n    /**\r\n     * property validation\r\n     * + verb property validation\r\n     * + profile dictionary의 verb에 존재 여부 validation\r\n     * @param verbName \r\n     * @returns boolean\r\n     */\r\n    public validateVerbName(verbName: string) {\r\n        return this.verbDict[0]['media'].hasOwnProperty(verbName);\r\n    }\r\n\r\n    /**\r\n     * set property\r\n     * + validation 후 verb property 구성\r\n     * @param verbName \r\n     * @returns boolean\r\n     */\r\n    public setVerb(verbName: string) {\r\n        if(this.verbDict[0]['media'][verbName].id !== '' || undefined && this.verbDict[0]['media'][verbName].display !== '' || undefined){\r\n            this._verb = {\r\n                id: this.verbDict[0]['media'][verbName].id,\r\n                display: this.verbDict[0]['media'][verbName].display\r\n            }\r\n            return true;\r\n        } else {\r\n            console.log({\"error\":\"setVerb is fail.\"});\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + activity property validation\r\n     * + profile dictionary의 activity에 존재 여부 validation\r\n     * @param objectActivityName \r\n     * @returns boolean\r\n     */\r\n    public validateActivityName(objectActivityName: string) {\r\n        return this.activityDict[0]['media'].hasOwnProperty(objectActivityName.toLocaleLowerCase())\r\n    }\r\n    \r\n    /**\r\n     * set property\r\n     * + validation 후 activity property 구성\r\n     * @param objectActivityName\r\n     * @param objectID\r\n     * @param definitionName\r\n     * @param description\r\n     * @returns boolean\r\n     */\r\n    public setActivity(objectActivityName: string, objectID: string, definitionName: any, description: object) {\r\n        objectActivityName = objectActivityName.toLowerCase();\r\n        objectID = objectID;\r\n        let objectType =  \"Activity\";\r\n\r\n        if(this.validateActivityName(objectActivityName)){\r\n            if(definitionName != {} || definitionName != undefined ||definitionName != '' ){\r\n                if(Object.keys(description).length === 0){\r\n                    this._activity = {\r\n                        id: objectID,\r\n                        objectType: objectType,\r\n                        definition: {\r\n                            name: definitionName,\r\n                            type: this.activityDict[0]['media'][objectActivityName].type\r\n                        }\r\n                    }\r\n                } else {\r\n                    this._activity={\r\n                        id: objectID,\r\n                        objectType: objectType,\r\n                        definition: {\r\n                            name: definitionName,\r\n                            type: this.activityDict[0]['media'][objectActivityName].type,\r\n                            description: description\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return true;\r\n        } else {\r\n            console.log({\"error\":\"setActivity is fail.\"});\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + profile dictionary의 result에 존재 여부 validation\r\n     * @param result \r\n     * @returns boolean\r\n     */\r\n    public validateResult(result: object){\r\n        let flag = true;\r\n        if(result.hasOwnProperty(\"score\")){\r\n            if(result[\"score\"].hasOwnProperty(\"scaled\")){\r\n                if(-1 <= result[\"score\"][\"scaled\"] && result[\"score\"][\"scaled\"] <= 1){\r\n                    flag = true;\r\n                } else {\r\n                    flag = false;\r\n                }\r\n            }\r\n            if(result[\"score\"].hasOwnProperty(\"raw\")){\r\n                if(-1 <= result[\"score\"][\"raw\"] && result[\"score\"][\"raw\"] <= 1){\r\n                    flag = true;\r\n                } else {\r\n                    flag = false;\r\n                }\r\n            }\r\n            if(result[\"score\"].hasOwnProperty(\"min\")){\r\n                if(-1 <= result[\"score\"][\"min\"] && result[\"score\"][\"min\"] <= 1){\r\n                    flag = true;\r\n                } else {\r\n                    flag = false;\r\n                }\r\n            }\r\n            if(result[\"score\"].hasOwnProperty(\"max\")) {\r\n                if(-1 <= result[\"score\"][\"max\"] && result[\"score\"][\"max\"]<= 1){\r\n                    flag = true;\r\n                } else {\r\n                    flag = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        if(result.hasOwnProperty(\"completion\")){\r\n            if(typeof result[\"completion\"] === \"boolean\"){\r\n                flag = true;\r\n            } else {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(result.hasOwnProperty(\"duration\")){\r\n            if(typeof result[\"duration\"] === \"number\"){\r\n                flag = true;\r\n            } else {\r\n                flag = false;\r\n            }\r\n        }\r\n        \r\n        if(result.hasOwnProperty(\"success\")){\r\n            if(typeof result[\"success\"] === \"boolean\"){\r\n                flag = true;\r\n            } else {\r\n                flag = false;\r\n            }        \r\n        }\r\n        \r\n        if(result.hasOwnProperty(\"response\")){\r\n            if(typeof result[\"response\"] === \"string\"){\r\n                flag = true;\r\n            } else {\r\n                flag = false;\r\n            }        \r\n        }\r\n        return flag;\r\n    }\r\n\r\n    /**\r\n     * set property\r\n     * + validation 후 result property 구성\r\n     * @param verbName \r\n     * @param result \r\n     * @param extension \r\n     * @returns boolean\r\n     */\r\n    public setResult(verbName :string, result : object, extension: object) {\r\n        let flag = false;\r\n        let ext = {};\r\n\r\n        if(!this.mediaSessionId.hasOwnProperty(extension[\"media-session-id\"])){\r\n            this.mediaSessionId[extension[\"media-session-id\"]] = {};\r\n        }\r\n\r\n        if( !this.validateExtensionName(extension)){\r\n            return flag;\r\n        }\r\n\r\n        for (let key in extension){\r\n            if(this.resultExtensionsDict[0]['media'].hasOwnProperty(key)){\r\n                ext[this.resultExtensionsDict[0]['media'][key]] = extension[key];\r\n            }\r\n        }\r\n\r\n        if(result == undefined){\r\n            result = {};\r\n        }\r\n\r\n        if(verbName == \"terminated\"){\r\n            result[\"extensions\"] = ext;\r\n\r\n            if(this.started == true){\r\n                this.endPlayedSegment(extension[\"time\"], extension[\"media-session-id\"]);\r\n            }\r\n            if(result[\"duration\"] == undefined){\r\n               result[\"duration\"] =  this.setDuration(extension[\"media-session-id\"]);\r\n            } else {\r\n                result[\"duration\"] = \"PT\"+result[\"duration\"].toFixed(3)+\"S\"\r\n            }\r\n\r\n            result[\"extensions\"][this.resultExtensionsDict[0]['media'][\"played-segments\"]] = this.mediaSessionId[extension[\"media-session-id\"]][\"segments\"];\r\n            this._result = result;\r\n\r\n            flag = true;\r\n        } else if(verbName == \"paused\" || verbName == \"completed\"){\r\n            this.started = false;\r\n            this.endPlayedSegment(extension[\"time\"],extension[\"media-session-id\"]);\r\n\r\n            if(result[\"duration\"] == undefined){\r\n                result[\"duration\"] =  this.setDuration(extension[\"media-session-id\"]);\r\n            } else {\r\n                result[\"duration\"] = \"PT\"+result[\"duration\"].toFixed(3)+\"S\"\r\n            }\r\n\r\n            result[\"extensions\"] = ext;\r\n            result[\"extensions\"][this.resultExtensionsDict[0]['media'][\"played-segments\"]] = this.mediaSessionId[extension[\"media-session-id\"]][\"segments\"];\r\n            this._result = result;\r\n            \r\n            flag = true;\r\n        } else if(verbName == \"played\"){\r\n            this.started = true;\r\n            this.startPlayedSegment(extension[\"time\"],extension[\"media-session-id\"]);\r\n            result[\"extensions\"] = ext;\r\n            this._result = result;\r\n\r\n            flag = true;\r\n        } else if(verbName == \"seeked\"){\r\n            if(this.started){// if media started\r\n                result[\"extensions\"] = ext;\r\n                this._result = result;\r\n                this.endPlayedSegment(extension[\"time-from\"],extension[\"media-session-id\"]);\r\n                this.startPlayedSegment(extension[\"time-to\"],extension[\"media-session-id\"]);\r\n\r\n                flag = true;\r\n            } else {\r\n                result[\"extensions\"] = ext;\r\n                this._result = result;\r\n\r\n                flag = true;\r\n            }\r\n        } else {\r\n            this._result = result;\r\n            result[\"extensions\"] = ext;\r\n\r\n            flag = true;\r\n        }\r\n        \r\n        return flag;\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + profile dictionary의 context에 존재 여부 validation\r\n     * @param extension \r\n     * @returns boolean\r\n     */\r\n    public validateContextName(extension : object) {\r\n        if(this.validateExtensionName(extension)){\r\n            return true\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * set property\r\n     * + validation 후 context property 구성\r\n     * @param extension \r\n     * @returns boolean\r\n     */\r\n    public setContext(extension :object){\r\n        let ext = {};\r\n\r\n        if(!this.validateExtensionName(extension)){\r\n            return false;\r\n        }\r\n        \r\n        for (let key in extension){\r\n            if(this.contextExtensionsDict[0]['media'].hasOwnProperty(key)){\r\n                ext[this.contextExtensionsDict[0]['media'][key]] = extension[key];\r\n            }\r\n        }\r\n        \r\n        this._context = {\r\n            extensions: ext\r\n        }\r\n        \r\n        return true;\r\n    }\r\n    \r\n    /**\r\n     * property validation\r\n     * + profile dictionary의 extension에 존재 여부 validation\r\n     * @param extensions \r\n     * @returns boolean\r\n     */\r\n    public validateExtensionName(extensions : object){\r\n        let flag = true;\r\n\r\n        //result extention\r\n        if(extensions.hasOwnProperty(\"time\")){\r\n            if(typeof extensions[\"time\"] !== \"number\"){\r\n                flag = false;\r\n            }\r\n\r\n            extensions[\"time\"] = parseFloat(extensions[\"time\"].toFixed(3));\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"time-from\")){\r\n            if (typeof extensions[\"time-from\"] !== \"number\") {\r\n                flag = false;\r\n            }\r\n\r\n            extensions[\"time-from\"] = parseFloat(extensions[\"time-from\"].toFixed(3));\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"time-to\")){\r\n            if (typeof extensions[\"time-to\"] !== \"number\") {\r\n                flag = false;\r\n            }\r\n\r\n            extensions[\"time-to\"] = parseFloat(extensions[\"time-to\"].toFixed(3));\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"progress\")){\r\n            if (typeof extensions[\"progress\"] !== \"number\") {\r\n                flag = false;\r\n            }\r\n\r\n            extensions[\"progress\"] = parseFloat(extensions[\"progress\"].toFixed(3));\r\n        }\r\n\r\n        //context extention\r\n        if(extensions.hasOwnProperty(\"cc-subtitle-enabled\")){\r\n            if (typeof extensions[\"cc-subtitle-enabled\"] !== \"boolean\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"cc-subtitle-lang\")){\r\n            if (typeof extensions[\"cc-subtitle-lang\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"frame-rate\")){\r\n            if (typeof extensions[\"frame-rate\"] !== \"number\") {\r\n                flag = false;\r\n            }\r\n\r\n            extensions[\"frame-rate\"] = parseFloat(extensions[\"frame-rate\"].toFixed(3));\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"full-screen\")){\r\n            if (typeof extensions[\"full-screen\"] !== \"boolean\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"quality\")){\r\n            if (typeof extensions[\"quality\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"screen-size\")){\r\n            if (typeof extensions[\"screen-size\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"video-playback-size\")){\r\n            if (typeof extensions[\"video-playback-size\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"speed\")){\r\n            if (typeof extensions[\"speed\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"track\")){\r\n            if (typeof extensions[\"track\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"user-agent\")){\r\n            if (typeof extensions[\"user-agent\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"volume\")){\r\n            if (typeof extensions[\"volume\"] !== \"number\") {\r\n                flag = false;\r\n            } else if( 0 <= extensions[\"volume\"] && extensions[\"volume\"] <= 1){\r\n                extensions[\"volume\"] = parseFloat(extensions[\"volume\"].toFixed(3));\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"length\")){\r\n            if (typeof extensions[\"length\"] !== \"number\") {\r\n                flag = false;\r\n            }\r\n\r\n            extensions[\"length\"] = parseFloat(extensions[\"length\"].toFixed(3));\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"completion-threshold\")){\r\n            if (typeof extensions[\"completion-threshold\"] !== \"number\") {\r\n                flag = false;\r\n            }\r\n\r\n            extensions[\"completion-threshold\"] = parseFloat(extensions[\"completion-threshold\"].toFixed(3));\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"tag\")){\r\n            if (typeof extensions[\"tag\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"media-session-id\")){\r\n            if (typeof extensions[\"media-session-id\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        } else {\r\n            flag = false;\r\n        }\r\n\r\n        return flag;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + verb property return\r\n     * @returns _verb\r\n     */\r\n    public getCurrentVerb(){\r\n        return this._verb;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + activity property return\r\n     * @returns _activity\r\n     */\r\n    public getCurrentActivity(){\r\n        return this._activity;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + result property return\r\n     * @returns _result\r\n     */\r\n    public getCurrentResult(){\r\n        return this._result;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + context property return\r\n     * @returns _context\r\n     */\r\n    public getCurrentContext(){\r\n        return this._context;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + result extension property return\r\n     * @returns result extension\r\n     */\r\n    public getCurrentResultExtension(){\r\n        return this._result[\"extensions\"];\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + context extension property return\r\n     * @returns context extension\r\n     */\r\n    public getCurrentContextExtension(){\r\n        return this._context[\"extensions\"];\r\n    }\r\n    \r\n    /**\r\n     * property validation\r\n     * + result와 context property의 extension에 대한 validation\r\n     * @param profile \r\n     * @returns boolean\r\n     */\r\n    public validateProfile(profile : Profile){\r\n        let verb =  profile['verb']['id'];\r\n        let result = profile['result'];\r\n        let context = profile['context'];\r\n        let flag = false;\r\n        \r\n        switch (verb) {\r\n            case this.verbDict[0]['media'].initialized.id:\r\n                if( context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"length\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"media-session-id\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['media'].played.id:\r\n                if( result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"time\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"media-session-id\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['media'].paused.id:\r\n                if( result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"time\"]) &&\r\n                    result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"progress\"]) &&\r\n                    result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"played-segments\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"length\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"media-session-id\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;        \r\n            case this.verbDict[0]['media'].seeked.id:\r\n                if( result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"time-from\"]) &&\r\n                    result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"time-to\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"media-session-id\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['media'].completed.id:\r\n                if( result.hasOwnProperty(\"completion\") &&\r\n                    result.hasOwnProperty(\"duration\") &&\r\n                    result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"time\"]) &&\r\n                    result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"progress\"]) &&\r\n                    result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"played-segments\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"length\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"media-session-id\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['media'].terminated.id:\r\n                if( result.hasOwnProperty(\"duration\") &&\r\n                    result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"time\"]) &&\r\n                    result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"progress\"]) &&\r\n                    result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"played-segments\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"length\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"media-session-id\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['media'].interacted.id:\r\n                if( result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['media'][\"time\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['media'][\"media-session-id\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n        }\r\n    }\r\n\r\n    /** \r\n     * Set startSegments\r\n     * @param start ex) 0.000\r\n     * @returns void\r\n     */\r\n    private startPlayedSegment(start:number , mediaSessionId:string){\r\n        this.mediaSessionId[mediaSessionId][\"startSegments\"] = start;\r\n    }\r\n\r\n    /** \r\n     * Set endPlayedSegment and segments\r\n     * @param end ex) 1.000\r\n     * @returns void\r\n     */\r\n    private endPlayedSegment(end:number, mediaSessionId:string){\r\n        let arr :Array<any>;\r\n\r\n        arr = (this.mediaSessionId[mediaSessionId][\"segments\"] == undefined) ? [] : this.mediaSessionId[mediaSessionId][\"segments\"].split(\"[,]\");\r\n            arr.push(this.mediaSessionId[mediaSessionId][\"startSegments\"].toFixed(3) + \"[.]\" + end.toFixed(3));\r\n            this.mediaSessionId[mediaSessionId][\"segments\"] = arr.join(\"[,]\");\r\n            this.mediaSessionId[mediaSessionId][\"endSegments\"] = end;\r\n            this.mediaSessionId[mediaSessionId][\"startSegments\"] = null;\r\n    }\r\n    /** \r\n     * calculate duration\r\n     * @returns duration\r\n     */\r\n    private calculateDuration(mediaSessionId:string) {\r\n        let arr : any[] , arr2:  any[] ;\r\n        \r\n        //get played segments array\r\n        arr = (this.mediaSessionId[mediaSessionId][\"segments\"] == undefined) ? [] :this.mediaSessionId[mediaSessionId][\"segments\"].split(\"[,]\");\r\n\r\n        if (this.mediaSessionId[mediaSessionId][\"startSegments\"] != null) {\r\n            arr.push(this.mediaSessionId[mediaSessionId][\"startSegments\"].toFixed(3) + \"[.]\" + this.mediaSessionId[mediaSessionId][\"endSegments\"].toFixed(3));\r\n        }\r\n\r\n        arr2 = [];\r\n        let duration = 0;\r\n\r\n        arr.forEach(function (v, i) {\r\n            arr2[i] = v.split(\"[.]\");\r\n            arr2[i][0] *= 1;\r\n            arr2[i][1] *= 1;\r\n        \r\n            if(arr2[i][1] > arr2[i][0])\r\n                duration += arr2[i][1] - arr2[i][0];\r\n        });\r\n        \r\n        return duration;\r\n    }\r\n\r\n    /** \r\n     * Set duration\r\n     * + duration 계산 (ISO8601 기준)\r\n     * @returns duration\r\n     */\r\n    private setDuration(mediaSessionId:string){\r\n        let duration :number = 0;\r\n\r\n        duration = this.calculateDuration(mediaSessionId)\r\n\r\n        return \"PT\" + duration.toFixed(3) + \"S\";\r\n    }\r\n}","import { xAPIProfile,Profile } from '../xAPIProfile';\r\n\r\n/**\r\n * navigation profile\r\n * + verb, activity, result, context, extension property에 대한 validation 처리\r\n * + validation 후 verb, activty, result, context, extension property 구성\r\n */\r\nexport class NavigationProfile extends xAPIProfile  {  \r\n    iso8601RegExp = /^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$/;\r\n\r\n    private verbDict = this.dict.verb.filter(data => data.hasOwnProperty('navigation'));\r\n    private activityDict = this.dict.activityNames.filter(data => data.hasOwnProperty('navigation'));\r\n    private resultExtensionsDict = this.dict.extensions.result.filter(data => data.hasOwnProperty('navigation'));\r\n    private contextExtensionsDict = this.dict.extensions.context.filter(data => data.hasOwnProperty('navigation'));\r\n\r\n    /**\r\n     * property validation\r\n     * + verb property validation\r\n     * + profile dictionary의 verb에 존재 여부 validation\r\n     * @param verbName \r\n     * @returns boolean\r\n     */\r\n    public validateVerbName(verbName: string) {\r\n        return this.verbDict[0]['navigation'].hasOwnProperty(verbName);\r\n    }\r\n\r\n    /**\r\n     * set property\r\n     * + validation 후 verb property 구성\r\n     * @param verbName \r\n     * @returns boolean\r\n     */\r\n    public setVerb(verbName: string) {\r\n        if(this.verbDict[0]['navigation'][verbName].id !== '' || undefined && this.verbDict[0]['navigation'][verbName].display !== '' || undefined){\r\n            this._verb ={\r\n                id: this.verbDict[0]['navigation'][verbName].id,\r\n                display : this.verbDict[0]['navigation'][verbName].display\r\n            }\r\n\r\n            return true;\r\n        }else{\r\n            console.log({\"error\":\"setVerb is fail.\"});\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + activity property validation\r\n     * + profile dictionary의 activity에 존재 여부 validation\r\n     * @param objectActivityName \r\n     * @returns boolean\r\n     */\r\n    public validateActivityName(objectActivityName: string) {\r\n        return this.activityDict[0]['navigation'].hasOwnProperty(objectActivityName.toLocaleLowerCase())\r\n    }\r\n    \r\n    /**\r\n     * set property\r\n     * + validation 후 activity property 구성\r\n     * @param objectActivityName \r\n     * @param objectID \r\n     * @param definitionName \r\n     * @param description \r\n     * @returns boolean\r\n     */\r\n    public setActivity(objectActivityName: string, objectID: string, definitionName : any, description :object) {\r\n        objectActivityName = objectActivityName.toLowerCase();\r\n        objectID = objectID;\r\n        let objectType =  \"Activity\";\r\n\r\n        if(this.validateActivityName(objectActivityName)){\r\n            if(definitionName != {} || definitionName != undefined ||definitionName != '' ){\r\n                if(Object.keys(description).length === 0){\r\n                    this._activity={\r\n                        id : objectID,\r\n                        objectType : objectType,\r\n                        definition :{\r\n                            name : definitionName,\r\n                            type : this.activityDict[0]['navigation'][objectActivityName].type\r\n                        }\r\n                    }\r\n                } else {\r\n                    this._activity={\r\n                        id : objectID,\r\n                        objectType : objectType,\r\n                        definition :{\r\n                            name : definitionName,\r\n                            type : this.activityDict[0]['navigation'][objectActivityName].type,\r\n                            description : description\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return true;\r\n        } else {\r\n            console.log({\"error\":\"setActivity is fail.\"});\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + profile dictionary의 result에 존재 여부 validation\r\n     * @param result \r\n     * @returns boolean\r\n     */\r\n    public validateResult(result: object){\r\n        let flag = true;\r\n        if (result.hasOwnProperty(\"score\")) {\r\n            if(result[\"score\"].hasOwnProperty(\"scaled\")){\r\n                if(-1 <= result[\"score\"][\"scaled\"] && result[\"score\"][\"scaled\"] <= 1){\r\n                    flag = true;\r\n                } else {\r\n                    flag = false;\r\n                }\r\n            }\r\n\r\n            if(result[\"score\"].hasOwnProperty(\"raw\")){\r\n                if(-1 <= result[\"score\"][\"raw\"] && result[\"score\"][\"raw\"] <= 1){\r\n                    flag = true;\r\n                } else {\r\n                    flag = false;\r\n                }\r\n            }\r\n\r\n            if(result[\"score\"].hasOwnProperty(\"min\")){\r\n                if(-1 <= result[\"score\"][\"min\"] && result[\"score\"][\"min\"] <= 1){\r\n                    flag = true;\r\n                } else {\r\n                    flag = false;\r\n                }\r\n            }\r\n\r\n            if(result[\"score\"].hasOwnProperty(\"max\")){\r\n                if(-1 <= result[\"score\"][\"max\"] && result[\"score\"][\"max\"]<= 1){\r\n                    flag = true;\r\n                } else {\r\n                    flag = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        if(result.hasOwnProperty(\"completion\")){\r\n            if(typeof result[\"completion\"] === \"boolean\"){\r\n                flag = true;\r\n            } else {\r\n                flag = false;\r\n            }\r\n        }\r\n        \r\n        if(result.hasOwnProperty(\"success\")){\r\n            if(typeof result[\"success\"] === \"boolean\"){\r\n                flag = true;\r\n            } else {\r\n                flag = false;\r\n            }        \r\n        }\r\n\r\n        if(result.hasOwnProperty(\"response\")){\r\n            if(typeof result[\"response\"] === \"string\"){\r\n                flag = true;\r\n            } else {\r\n                flag = false;\r\n            }        \r\n        }\r\n\r\n        return flag;\r\n    }\r\n\r\n    /**\r\n     * set property\r\n     * + validation 후 result property 구성\r\n     * @param verbName \r\n     * @param result \r\n     * @param extension \r\n     * @returns boolean\r\n     */\r\n    public setResult(verbName :string, result : object, extension: object) {\r\n        let flag = false;\r\n        let ext = {};\r\n\r\n        if( !this.validateExtensionName(extension)){\r\n            return flag;\r\n        }\r\n\r\n        for (let key in extension){\r\n            if(this.resultExtensionsDict[0]['navigation'].hasOwnProperty(key)){\r\n                ext[this.resultExtensionsDict[0]['navigation'][key]] = extension[key];\r\n            }\r\n        }\r\n\r\n        if(result == undefined){\r\n            result = {};\r\n        }\r\n\r\n        if(verbName == \"viewed\"){\r\n            if(!result.hasOwnProperty(\"duration\")){\r\n                result[\"duration\"] = this.setDuration(extension[\"view-started-time\"],extension[\"view-ended-time\"]);\r\n            }\r\n\r\n            result[\"extensions\"] = ext;\r\n            this._result = result;\r\n            flag = true;\r\n        }\r\n\r\n        this._result = result;\r\n        result[\"extensions\"] = ext;\r\n        flag = true;\r\n\r\n        return flag;        \r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + profile dictionary의 context에 존재 여부 validation\r\n     * @param extension \r\n     * @returns boolean\r\n     */\r\n    public validateContextName(extension : object) {\r\n        if(this.validateExtensionName(extension)){\r\n            return true\r\n        }\r\n        \r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * set property\r\n     * + validation 후 context property 구성\r\n     * @param extension \r\n     * @returns boolean\r\n     */\r\n    public setContext(extension :object){\r\n        let ext = {}; \r\n\r\n        if(!this.validateExtensionName(extension)){\r\n            return false;\r\n        }\r\n\r\n        for (let key in extension){\r\n            if(this.contextExtensionsDict[0]['navigation'].hasOwnProperty(key)){\r\n                ext[this.contextExtensionsDict[0]['navigation'][key]] = extension[key];\r\n            }\r\n        }\r\n\r\n        this._context = {\r\n            extensions : ext\r\n        }\r\n        \r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + profile dictionary의 extension에 존재 여부 validation\r\n     * @param extensions \r\n     * @returns boolean\r\n     */\r\n    public validateExtensionName(extensions : object) {\r\n        let flag = true;\r\n        //result extention\r\n        if(extensions.hasOwnProperty(\"current-index\")){\r\n            if(typeof extensions[\"current-index\"] !== \"string\"){\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"total-index\")){\r\n            if (typeof extensions[\"total-index\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"view-started-time\")){\r\n            extensions[\"view-started-time\"] = new Date(extensions[\"view-started-time\"]).toISOString();\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"view-ended-time\")){\r\n            extensions[\"view-ended-time\"] = new Date(extensions[\"view-ended-time\"]).toISOString();\r\n        }\r\n\r\n        //context extention\r\n        if(extensions.hasOwnProperty(\"target-id\")){\r\n            if (typeof extensions[\"target-id\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"target-type\")){\r\n            if (typeof extensions[\"target-type\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"target-name\")){\r\n            if (typeof extensions[\"target-name\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"referrer-id\")){\r\n            if (typeof extensions[\"referrer-id\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"referrer-type\")){\r\n            if (typeof extensions[\"referrer-type\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"referrer-name\")){\r\n            if (typeof extensions[\"referrer-name\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        return flag;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + verb property return\r\n     * @returns _verb\r\n     */\r\n    public getCurrentVerb(){\r\n        return this._verb;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + activity property return\r\n     * @returns _activity\r\n     */\r\n    public getCurrentActivity(){\r\n        return this._activity;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + result property return\r\n     * @returns _result\r\n     */\r\n    public getCurrentResult(){\r\n        return this._result;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + context property return\r\n     * @returns _context\r\n     */\r\n    public getCurrentContext(){\r\n        return this._context;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + result extension property return\r\n     * @returns result extension\r\n     */\r\n    public getCurrentResultExtension(){\r\n        return this._result[\"extensions\"];\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + context extension property return\r\n     * @returns context extension\r\n     */\r\n    public getCurrentContextExtension(){\r\n        return this._context[\"extensions\"];\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + result와 context property의 extension에 대한 validation\r\n     * @param profile \r\n     * @returns boolean\r\n     */\r\n    validateProfile(profile:Profile): boolean {\r\n        let verb =  profile.verb.id;\r\n        let result = profile.result;\r\n        let context = profile.context;\r\n        let flag = false;\r\n\r\n        switch (verb) {\r\n            case this.verbDict[0]['navigation'][\"moved-to\"].id:\r\n                if( context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-type\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['navigation'][\"next\"].id:\r\n                if( context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-type\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"referrer-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"referrer-type\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['navigation'][\"previous\"].id:\r\n                if( context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-type\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"referrer-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"referrer-type\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;        \r\n            case this.verbDict[0]['navigation'][\"clicked\"].id:\r\n                if( context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-type\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['navigation'][\"viewed\"].id:\r\n                if( context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-type\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['navigation'][\"popped-up\"].id:\r\n                if( context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-type\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"referrer-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"referrer-type\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['navigation'][\"opened\"].id:\r\n                if( context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-type\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['navigation'][\"closed\"].id:\r\n                if( context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['navigation'][\"target-type\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n        }\r\n    }\r\n\r\n    /** \r\n     * Set duration\r\n     * + duration 계산 (ISO8601 기준)\r\n     * @returns duration\r\n     */\r\n    setDuration(startDate:Date,endDate:Date){\r\n        let start = new Date(startDate).getTime();\r\n        let end = new Date(endDate).getTime();\r\n        let duration =Math.abs(((start - end)/1000)).toFixed(3);\r\n        return \"PT\"+ duration +\"S\";\r\n    }\r\n}","import { xAPIProfile,Profile } from '../xAPIProfile';\r\n\r\n/**\r\n * session profile\r\n * + verb, activity, result, context, extension property에 대한 validation 처리\r\n * + validation 후 verb, activty, result, context, extension property 구성\r\n */\r\nexport class SessionProfile extends xAPIProfile  {\r\n    private verbDict = this.dict.verb.filter(data => data.hasOwnProperty('session'));\r\n    private activityDict = this.dict.activityNames.filter(data => data.hasOwnProperty('session'));\r\n    private resultExtensionsDict = this.dict.extensions.result.filter(data => data.hasOwnProperty('session'));\r\n    private contextExtensionsDict = this.dict.extensions.context.filter(data => data.hasOwnProperty('session'));\r\n\r\n    /**\r\n     * property validation\r\n     * + verb property validation\r\n     * + profile dictionary의 verb에 존재 여부 validation\r\n     * @param verbName \r\n     * @returns boolean\r\n     */  \r\n    public validateVerbName(verbName: string) {\r\n        return this.verbDict[0]['session'].hasOwnProperty(verbName);\r\n    }\r\n    \r\n    /**\r\n     * set property\r\n     * + validation 후 verb property 구성\r\n     * @param verbName \r\n     * @returns boolean\r\n     */\r\n    public setVerb(verbName: string) {\r\n        \r\n        if(this.verbDict[0]['session'][verbName].id !== ''|| undefined && this.verbDict[0]['session'][verbName].display !== ''|| undefined){\r\n            this._verb ={\r\n                id: this.verbDict[0]['session'][verbName].id,\r\n                display : this.verbDict[0]['session'][verbName].display\r\n            }\r\n\r\n            return true;\r\n        } else {\r\n            console.log({\"error\":\"setVerb is fail.\"});\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + activity property validation\r\n     * + profile dictionary의 activity에 존재 여부 validation\r\n     * @param objectActivityName \r\n     * @returns boolean\r\n     */\r\n    public validateActivityName(objectActivityName: string) {\r\n        return this.activityDict[0]['session'].hasOwnProperty(objectActivityName.toLocaleLowerCase())\r\n    }\r\n    \r\n    /**\r\n     * set property\r\n     * + validation 후 activity property 구성\r\n     * @param objectActivityName \r\n     * @param objectID \r\n     * @param definitionName \r\n     * @param description \r\n     * @returns boolean\r\n     */\r\n    public setActivity(objectActivityName: string, objectID: string, definitionName : any, description :object) {\r\n        objectActivityName = objectActivityName.toLowerCase();\r\n        objectID = objectID;\r\n        let objectType =  \"Activity\";\r\n\r\n        if(this.validateActivityName(objectActivityName)){\r\n            if(definitionName != {} || definitionName != undefined ||definitionName != '' ){\r\n                if(Object.keys(description).length === 0){\r\n                    this._activity={\r\n                        id : objectID,\r\n                        objectType : objectType,\r\n                        definition :{\r\n                            name : definitionName,\r\n                            type : this.activityDict[0]['session'][objectActivityName].type\r\n                        }\r\n                    }\r\n                } else {\r\n                    this._activity={\r\n                        id : objectID,\r\n                        objectType : objectType,\r\n                        definition :{\r\n                            name : definitionName,\r\n                            type : this.activityDict[0]['session'][objectActivityName].type,\r\n                            description : description\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return true;\r\n        } else {\r\n            console.log({\"error\":\"setActivity is fail.\"});\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + profile dictionary의 result에 존재 여부 validation\r\n     * @param result \r\n     * @returns boolean\r\n     */\r\n    public validateResult(result: object){\r\n        let flag = true;\r\n        \r\n        return flag;\r\n    }\r\n\r\n    /**\r\n     * set property\r\n     * + validation 후 result property 구성\r\n     * @param verbName \r\n     * @param result \r\n     * @param extension \r\n     * @returns boolean\r\n     */\r\n    public setResult(verbName :string, result : object, extension: object) {\r\n        let flag = false;\r\n        let ext = {};\r\n\r\n        if(!this.validateExtensionName(extension)){\r\n            return flag;\r\n        }\r\n\r\n        for(let key in extension){\r\n            if(this.resultExtensionsDict[0]['session'].hasOwnProperty(key)){\r\n                ext[this.resultExtensionsDict[0]['session'][key]] = extension[key];\r\n            }\r\n        }\r\n\r\n        if(result == undefined){\r\n            result = {};\r\n        }\r\n\r\n        this._result = result;\r\n        result[\"extensions\"] = ext;\r\n        flag = true;\r\n\r\n        return flag;        \r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + profile dictionary의 context에 존재 여부 validation\r\n     * @param extension \r\n     * @returns boolean\r\n     */\r\n    public validateContextName(extension : object) {\r\n        if(this.validateExtensionName(extension)){\r\n            return true\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * set property\r\n     * + validation 후 context property 구성\r\n     * @param extension \r\n     * @returns boolean\r\n     */\r\n    public setContext(extension :object){\r\n        let ext = {};\r\n\r\n        if(!this.validateExtensionName(extension)){\r\n            return false;\r\n        }\r\n\r\n        for(let key in extension){\r\n            if(this.contextExtensionsDict[0]['session'].hasOwnProperty(key)){\r\n                ext[this.contextExtensionsDict[0]['session'][key]] = extension[key];\r\n            }\r\n        }\r\n\r\n        this._context = {\r\n            extensions : ext\r\n        }\r\n        \r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + profile dictionary의 extension에 존재 여부 validation\r\n     * @param extensions \r\n     * @returns boolean\r\n     */\r\n    public validateExtensionName(extensions : object) {\r\n        let flag = true;\r\n        //result extention\r\n        if(extensions.hasOwnProperty(\"attempt-count\")){\r\n            if(typeof extensions[\"attempt-count\"] !== \"number\"){\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"attended-time\")){\r\n            if (typeof extensions[\"attended-time\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"leaved-reason\")){\r\n            if (typeof extensions[\"leaved-reason\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"attended-reason\")){\r\n            if (typeof extensions[\"attended-reason\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        //context extention\r\n        if(extensions.hasOwnProperty(\"session-id\")){\r\n            if (typeof extensions[\"session-id\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"started-time\")){\r\n            if (typeof extensions[\"started-time\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"ended-time\")){\r\n            if (typeof extensions[\"ended-time\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"user-agent\")){\r\n            if (typeof extensions[\"user-agent\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"ip-address\")){\r\n            if (typeof extensions[\"ip-address\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        if(extensions.hasOwnProperty(\"host\")){\r\n            if (typeof extensions[\"host\"] !== \"string\") {\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        return flag;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + verb property return\r\n     * @returns _verb\r\n     */\r\n    public getCurrentVerb(){\r\n        return this._verb;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + activity property return\r\n     * @returns _activity\r\n     */\r\n    public getCurrentActivity(){\r\n        return this._activity;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + result property return\r\n     * @returns _result\r\n     */\r\n    public getCurrentResult(){\r\n        return this._result;\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + context property return\r\n     * @returns _context\r\n     */\r\n    public getCurrentContext(){\r\n        return this._context;\r\n    }\r\n    \r\n    /**\r\n     * property return\r\n     * + result extension property return\r\n     * @returns result extension\r\n     */\r\n    public getCurrentResultExtension(){\r\n        return this._result[\"extension\"];\r\n    }\r\n\r\n    /**\r\n     * property return\r\n     * + context extension property return\r\n     * @returns context extension\r\n     */\r\n    public getCurrentContextExtension(){\r\n        return this._context[\"extension\"];\r\n    }\r\n\r\n    /**\r\n     * property validation\r\n     * + result와 context property의 extension에 대한 validation\r\n     * @param profile \r\n     * @returns boolean\r\n     */\r\n    public validateProfile(profile:Profile): boolean {\r\n        let verb =  profile.verb.id;\r\n        let result = profile.result;\r\n        let context = profile.context;\r\n        let flag = false;\r\n\r\n        switch (verb) {\r\n            case this.verbDict[0]['session'][\"logged-in\"].id:\r\n                if(context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"session-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"started-time\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['session'][\"logged-out\"].id:\r\n                if(context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"session-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"ended-time\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['session'][\"timed-out\"].id:\r\n                if(context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"session-id\"])){\r\n                    flag = true;\r\n                }\r\n                return flag;        \r\n            case this.verbDict[0]['session'][\"paused\"].id:\r\n                if(context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"session-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"ended-time\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['session'][\"resumed\"].id:\r\n                if(context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"session-id\"]) &&\r\n                    context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"started-time\"])\r\n                ){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['session'][\"attempted\"].id:\r\n                if(result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['session'][\"attempt-count\"])){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['session'][\"entered\"].id:\r\n                if(context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"started-time\"])){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['session'][\"leaved\"].id:\r\n                if(context[\"extensions\"].hasOwnProperty(this.contextExtensionsDict[0]['session'][\"ended-time\"])){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n            case this.verbDict[0]['session'][\"attended\"].id:\r\n                if(result[\"extensions\"].hasOwnProperty(this.resultExtensionsDict[0]['session'][\"attended-time\"])){\r\n                    flag = true;\r\n                }\r\n                return flag;\r\n        }\r\n    }\r\n}","/**\r\n * verb별 profile dictionary\r\n * + verb, activity, result extensions, context extensions로 구성\r\n */\r\nexport class xAPIDictionary {\r\n    verb = [\r\n        {\r\n            \"media\": {\r\n                \"initialized\": {\r\n                    \"id\": \"https://ubion.co.kr/xapi/profiles/media/1.0/verbs/initialized\",\r\n                    \"display\": {\r\n                        \"en-US\": \"initialized\"\r\n                    }\r\n                },\r\n                \"played\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/media/1.0/verbs/played\",\r\n                    \"display\": {\r\n                        \"en-US\": \"played\"\r\n                    }\r\n                },\r\n                \"paused\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/media/1.0/verbs/paused\",\r\n                    \"display\": {\r\n                        \"en-US\": \"paused\"\r\n                    }\r\n                },\r\n                \"seeked\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/media/1.0/verbs/seeked\",\r\n                    \"display\": {\r\n                        \"en-US\": \"seeked\"\r\n                    }\r\n                },\r\n                \"completed\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/media/1.0/verbs/completed\",\r\n                    \"display\": {\r\n                        \"en-US\": \"completed\"\r\n                    }\r\n                },\r\n                \"terminated\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/media/1.0/verbs/terminated\",\r\n                    \"display\": {\r\n                        \"en-US\": \"terminated\"\r\n                    }\r\n                },\r\n                \"interacted\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/media/1.0/verbs/interacted\",\r\n                    \"display\": {\r\n                        \"en-US\": \"interacted\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            \"session\": {\r\n                \"logged-in\": {\r\n                    \"id\": \"https://ubion.co.kr/xapi/profiles/session/1.0/verbs/logged-in\",\r\n                    \"display\": {\r\n                        \"en-US\": \"logged-in\"\r\n                    }\r\n                },\r\n                \"logged-out\": {\r\n                    \"id\": \"https://ubion.co.kr/xapi/profiles/session/1.0/verbs/logged-out\",\r\n                    \"display\": {\r\n                        \"en-US\": \"logged-out\"\r\n                    }\r\n                },\r\n                \"timed-out\": {\r\n                    \"id\": \"https://ubion.co.kr/xapi/profiles/session/1.0/verbs/timed-out\",\r\n                    \"display\": {\r\n                        \"en-US\": \"timed-out\"\r\n                    }\r\n                },\r\n                \"paused\": {\r\n                    \"id\": \"https://ubion.co.kr/xapi/profiles/session/1.0/verbs/paused\",\r\n                    \"display\": {\r\n                        \"en-US\": \"paused\"\r\n                    }\r\n                },\r\n                \"resumed\": {\r\n                    \"id\": \"https://ubion.co.kr/xapi/profiles/session/1.0/verbs/resumed\",\r\n                    \"display\": {\r\n                        \"en-US\": \"resumed\"\r\n                    }\r\n                },\r\n                \"attempted\": {\r\n                    \"id\": \"https://ubion.co.kr/xapi/profiles/session/1.0/verbs/attempted\",\r\n                    \"display\": {\r\n                        \"en-US\": \"attempted\"\r\n                    }\r\n                },\r\n                \"entered\": {\r\n                    \"id\": \"https://ubion.co.kr/xapi/profiles/session/1.0/verbs/entered\",\r\n                    \"display\": {\r\n                        \"en-US\": \"entered\"\r\n                    }\r\n                },\r\n                \"leaved\": {\r\n                    \"id\": \"https://ubion.co.kr/xapi/profiles/session/1.0/verbs/leaved\",\r\n                    \"display\": {\r\n                        \"en-US\": \"leaved\"\r\n                    }\r\n                },\r\n                \"attended\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/session/1.0/verbs/attended\",\r\n                    \"display\": {\r\n                        \"en-US\": \"attended\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            \"navigation\": {\r\n                \"moved-to\": {\r\n                    \"id\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/verbs/moved-to\",\r\n                    \"display\": {\r\n                        \"en-US\": \"moved-to\"\r\n                    }\r\n                },\r\n                \"next\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/navigation/1.0/verbs/next\",\r\n                    \"display\": {\r\n                        \"en-US\": \"next\"\r\n                    }\r\n                },\r\n                \"previous\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/navigation/1.0/verbs/previous\",\r\n                    \"display\": {\r\n                        \"en-US\": \"previous\"\r\n                    }\r\n                },\r\n                \"clicked\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/navigation/1.0/verbs/clicked\",\r\n                    \"display\": {\r\n                        \"en-US\": \"clicked\"\r\n                    }\r\n                },\r\n                \"viewed\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/navigation/1.0/verbs/viewed\",\r\n                    \"display\": {\r\n                        \"en-US\": \"viewed\"\r\n                    }\r\n                },\r\n                \"popped-up\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/navigation/1.0/verbs/popped-up\",\r\n                    \"display\": {\r\n                        \"en-US\": \"popped-up\"\r\n                    }\r\n                },\r\n                \"opened\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/navigation/1.0/verbs/opened\",\r\n                    \"display\": {\r\n                        \"en-US\": \"opened\"\r\n                    }\r\n                },\r\n                \"closed\": {\r\n                    \"id\":  \"https://ubion.co.kr/xapi/profiles/navigation/1.0/verbs/closed\",\r\n                    \"display\": {\r\n                        \"en-US\": \"closed\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    ]\r\n    activityNames = [\r\n        {\r\n            \"media\": {\r\n                \"video\": {\r\n                    \"type\": \"https://ubion.co.kr/xapi/activity-type/video\", \r\n                    \"moreInfo\": \"https://ubion.co.kr/xapi/activity-type/video/info\"\r\n                },\r\n                \"audio\": {\r\n                    \"type\": \"https://ubion.co.kr/xapi/activity-type/audio\", \r\n                    \"moreInfo\": \"https://ubion.co.kr/xapi/activity-type/audio/info\"\r\n                }\r\n            }\r\n        },\r\n        {\r\n            \"session\": {\r\n                \"software-application\": {\r\n                    \"type\": \"https://ubion.co.kr/xapi/activity-type/software-application\", \r\n                    \"moreInfo\": \"https://ubion.co.kr/xapi/activity-type/software-application/info\"\r\n                },\r\n                \"group-activity\": {\r\n                    \"type\": \"https://ubion.co.kr/xapi/activity-type/group-activity\", \r\n                    \"moreInfo\": \"https://ubion.co.kr/xapi/activity-type/group-activity/info\"\r\n                }\r\n            }\r\n        },\r\n        {\r\n            \"navigation\": {\r\n                \"document\": {\r\n                    \"type\": \"https://ubion.co.kr/xapi/activity-type/document\", \r\n                    \"moreInfo\": \"https://ubion.co.kr/xapi/activity-type/document/info\"\r\n                },\r\n                \"webpage\": {\r\n                    \"type\": \"https://ubion.co.kr/xapi/activity-type/webpage\", \r\n                    \"moreInfo\": \"https://ubion.co.kr/xapi/activity-type/webpage/info\"\r\n                },\r\n                \"menu\": {\r\n                    \"type\": \"https://ubion.co.kr/xapi/activity-type/menu\", \r\n                    \"moreInfo\": \"https://ubion.co.kr/xapi/activity-type/menu/info\"\r\n                },\r\n                \"toc\": {\r\n                    \"type\": \"https://ubion.co.kr/xapi/activity-type/toc\", \r\n                    \"moreInfo\": \"https://ubion.co.kr/xapi/activity-type/toc/info\"\r\n                }\r\n            }\r\n        }\r\n    ]\r\n    extensions = {\r\n        \"result\": [\r\n            {\r\n                \"media\": {\r\n                    \"time\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/result/time\",\r\n                    \"time-from\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/result/time-from\",\r\n                    \"time-to\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/result/time-to\",\r\n                    \"progress\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/result/progress\",\r\n                    \"played-segments\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/result/played-segments\"\r\n                }\r\n            },\r\n            {\r\n                \"session\": {\r\n                    \"attempt-count\": \"https://ubion.co.kr/xapi/profiles/session/1.0/extensions/result/attempt-count\",\r\n                    \"attended-time\": \"https://ubion.co.kr/xapi/profiles/session/1.0/extensions/result/attended-time\",\r\n                    \"attended-reason\": \"https://ubion.co.kr/xapi/profiles/session/1.0/extensions/result/attended-reason\",\r\n                    \"leaved-reason\": \"https://ubion.co.kr/xapi/profiles/session/1.0/extensions/result/leaved-reason\"\r\n                }\r\n            },\r\n            {\r\n                \"navigation\": {\r\n                    \"current-index\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/extensions/result/current-index\",\r\n                    \"total-index\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/extensions/result/total-index\",\r\n                    \"view-started-time\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/extensions/result/view-started-time\",\r\n                    \"view-ended-time\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/extensions/result/view-ended-time\"\r\n                }\r\n            }\r\n        ],\r\n        \"context\": [\r\n            {\r\n                \"media\": {\r\n                    \"media-session-id\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/media-session-id\",\r\n                    \"cc-subtitle-enabled\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/cc-subtitle-enabled\",\r\n                    \"cc-subtitle-lang\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/cc-subbtitle-lang\",\r\n                    \"frame-rate\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/frame-rate\",\r\n                    \"full-screen\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/full-screen\",\r\n                    \"quality\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/quality\",\r\n                    \"screen-size\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/screen-size\",\r\n                    \"video-playback-size\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/video-playback-size\",\r\n                    \"speed\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/speed\",\r\n                    \"track\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/track\",\r\n                    \"user-agent\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/user-agent\",\r\n                    \"volume\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/volume\",\r\n                    \"length\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/length\",\r\n                    \"completion-threshold\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/completion-threshold\",\r\n                    \"tag\": \"https://ubion.co.kr/xapi/profiles/media/1.0/extensions/context/tag\"\r\n                }\r\n            },\r\n            {\r\n                \"session\": {\r\n                    \"session-id\": \"https://ubion.co.kr/xapi/profiles/session/1.0/extensions/context/session-id\",\r\n                    \"started-time\": \"https://ubion.co.kr/xapi/profiles/session/1.0/extensions/context/started-time\",\r\n                    \"ended-time\": \"https://ubion.co.kr/xapi/profiles/session/1.0/extensions/context/ended-time\",\r\n                    \"user-agent\": \"https://ubion.co.kr/xapi/profiles/session/1.0/extensions/context/user-agent\",\r\n                    \"ip-address\": \"https://ubion.co.kr/xapi/profiles/session/1.0/extensions/context/ip-address\",\r\n                    \"host\": \"https://ubion.co.kr/xapi/profiles/session/1.0/extensions/context/host\"\r\n                }\r\n            },\r\n            {\r\n                \"navigation\": {\r\n                    \"target-id\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/extensions/context/target-id\",\r\n                    \"target-type\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/extensions/context/target-type\",\r\n                    \"target-name\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/extensions/context/target-name\",\r\n                    \"referrer-id\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/extensions/context/referrer-id\",\r\n                    \"referrer-type\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/extensions/context/referrer-type\",\r\n                    \"referrer-name\": \"https://ubion.co.kr/xapi/profiles/navigation/1.0/extensions/context/referrer-name\"\r\n                }\r\n            }\r\n        ]\r\n    }\r\n}","import { xAPIDictionary } from \"./xAPIDictionary\";\r\n\r\n/**\r\n * XapiProfile class\r\n * extend only\r\n */\r\nabstract class xAPIProfile{\r\n     /** XAPI property */\r\n    _verb : Verb;\r\n    _activity : Activity;\r\n    _result : Result;\r\n    _context : Extension;   \r\n    _extension : Extension;\r\n     /** XAPI NAMESPACE DICTIONARY */\r\n    dict = new xAPIDictionary();\r\n\r\n    /** \r\n     * Get Verb\r\n     * + profile dictionary에 해당 verb의 property가 있는지 validation\r\n     * + validation 후 setVerb를 호출하여 verb property 구성\r\n     * @param verbName Verb name\r\n     * @returns _verb or error object\r\n     */\r\n    getVerb(verbName: string) : Verb | object{\r\n        if(this.validateVerbName(verbName.toLowerCase())){\r\n            this.setVerb(verbName.toLowerCase());\r\n            return this._verb;\r\n        } else {\r\n            console.log({\"error\":\"setVerb is fail.\"});\r\n            return {\"error\":\"getVerb is fail.\"};\r\n        }        \r\n    }\r\n\r\n    /** \r\n     * Get Activity\r\n     * + profile dictionary에 해당 activity의 property가 있는지 validation\r\n     * + validation 후 setActivity를 호출하여 activity property 구성\r\n     * @param objectActivityName Activity Name ex) audio video\r\n     * @param objectId obejct Id ex) https://example.com/videos/b6a98d52-1e52-4d45-a14t-a15f97e63d25\r\n     * @param definitionName ex) Ocean Life\r\n     * @param description ex) {\"en-US\":\"some string awsome video\"}\r\n     * @return _activity\r\n     */\r\n    getActivity(objectActivityName: string, objectId: string, definitionName :string, description :object) {\r\n        if(this.validateActivityName(objectActivityName)){\r\n            this.setActivity(objectActivityName, objectId, definitionName, description);\r\n            \r\n            return this._activity;\r\n        } else {\r\n            console.log({\"error\":\"getActivity is fail.\"});\r\n            return {\"error\":\"getActivity is fail\"};\r\n        }\r\n    }\r\n\r\n    /** \r\n     * Get Result\r\n     * + profile dictionary에 해당 result의 property가 있는지 validation\r\n     * + validation 후 setResult를 호출하여 activity property 구성\r\n     * @param verbName verb name ex) played, initialized, etc...\r\n     * @param result result ex) score,completion,duration, etc...\r\n     * @param extension ex) length, time-from, time-to, etc...\r\n     * @return _result\r\n     */\r\n    getResult(verbName: string ,result : object, extension : object){\r\n        if(result != undefined){\r\n            if(this.validateResult(result)){\r\n                this.setResult(verbName.toLocaleLowerCase(), result, extension);\r\n                return this._result;\r\n            } else {\r\n                console.log({\"error\":\"getResult is fail.\"});\r\n                return {\"error\":\" setResult is fails\"};\r\n            }\r\n        } else {\r\n                this.setResult(verbName.toLocaleLowerCase(), result, extension);\r\n                return this._result;\r\n        }\r\n    }\r\n\r\n    /** \r\n     * Get Context\r\n     * + profile dictionary에 해당 context의 property가 있는지 validation\r\n     * + validation 후 setContext를 호출하여 activity property 구성\r\n     * @param extension extensions ex) time, time-to ,etc...\r\n     * @return _context\r\n     */\r\n    getContext(extension : object){\r\n        if(this.validateContextName(extension)){\r\n            this.setContext(extension);\r\n            return this._context;\r\n        } else {\r\n            console.log({\"error\":\"getContext is fail.\"});\r\n            return {'error': 'getContext fail'};\r\n        }\r\n    }\r\n    \r\n    /** \r\n     * Validation Verb Name\r\n     * + profile dictionary에 해당 verb의 property가 있는지 validation\r\n     * @param verbName verb name\r\n     * @return boolean\r\n     */\r\n    abstract validateVerbName(verbName: string): boolean;\r\n\r\n    /** \r\n     * Validation ActivityName\r\n     * + profile dictionary에 해당 activity의 property가 있는지 validation\r\n     * @param objectActivityName activityName\r\n     * @return boolean\r\n     */\r\n    abstract validateActivityName(objectActivityName: string): boolean;\r\n\r\n    /** \r\n     * Validation Result\r\n     * + profile dictionary에 해당 Result의 property가 있는지 validation\r\n     * @param result Result\r\n     * @return boolean\r\n     */\r\n    abstract validateResult(result: object) : boolean;\r\n\r\n    /** \r\n     * Validation Context extensions\r\n     * + profile dictionary에 해당 context의 property가 있는지 validation\r\n     * @param extension Context extensions\r\n     * @return boolean\r\n     */\r\n    abstract validateContextName(extension:object) : boolean;\r\n\r\n    /** \r\n     * Validation ExtensionName\r\n     * + profile dictionary에 해당 extension의 property가 있는지 validation\r\n     * @param extensions Extension \r\n     * @return boolean\r\n     */\r\n    abstract validateExtensionName(extensions:object) : boolean;\r\n\r\n    /** \r\n     * Set _verb\r\n     * + validation 완료 후 statement의 verb 구성\r\n     * @param extensions verbName \r\n     * @return boolean\r\n     */\r\n    abstract setVerb(verbName: string) : boolean;\r\n\r\n    /** \r\n     * Set _activity\r\n     * + validation 완료 후 statement의 activity 구성\r\n     * @param objectActivityName Activity Name ex) audio video\r\n     * @param objectId obejct Id ex) https://example.com/videos/b6a98d52-1e52-4d45-a14t-a15f97e63d25\r\n     * @param definitionName ex) Ocean Life\r\n     * @param description ex) {\"en-US\":\"some string awsome video\"}\r\n     * @return boolean\r\n     */\r\n    abstract setActivity(objectActivityName: string, objectID: string, definitionName :string, description :object) :boolean;\r\n    \r\n    /** \r\n     * Set _result\r\n     * + validation 완료 후 statement의 result 구성\r\n     * @param verbName verb name ex) played, initialized, etc...\r\n     * @param result result ex) score,completion,duration, etc...\r\n     * @param extension ex) length, time-from, time-to, etc...\r\n     * @return boolean\r\n     */\r\n    abstract setResult(verbName: string , result: object,extension:object) : boolean;\r\n    \r\n    /** \r\n     * Set _context\r\n     * + validation 완료 후 statement의 context 구성\r\n     * @param extension extensions ex) time, time-to ,etc...\r\n     * @return boolean\r\n     */\r\n    abstract setContext(extension : object) : boolean;\r\n    \r\n    /** \r\n     * Validation Profile\r\n     * + verb별 result와 context property의 extension property validation\r\n     * @param proifile statement object  {verb:Verb, activity: Activity, result: Result , context: Extension}\r\n     * @return boolean\r\n     */\r\n    abstract validateProfile(proifile :Profile): boolean;\r\n}\r\n\r\n/** verb type */\r\ninterface Verb  {id: string, display: Display};\r\n/** activity type */\r\ninterface Activity  {id: string, definition: Definition, objectType:string};\r\n/** result type */\r\ninterface Result  {score?: Score, success?: boolean, completion?: boolean, response?: string, duration?: string, extension?: Extension};\r\n/** profile type */\r\ninterface Profile  {verb:Verb, activity: Activity, result: Result , context: Extension};\r\n/** score type */\r\ninterface Score  {scaled?: number, raw?: number,min?:number,max?:number}\r\n/** extension type */\r\ninterface Extension  {};\r\n/** display type */\r\ninterface Display  {};\r\n/** definition type */\r\ninterface Definition  {name: object| string, description? : object, type: string, moreInfo?: string, extension?:object};\r\n\r\nexport{xAPIProfile,Verb,Result,Activity,Extension,Profile}","import {xAPIDictionary} from \"./xAPIDictionary\";\r\nimport {MediaProfile} from './Profiles/MediaProfile';\r\nimport {SessionProfile} from './Profiles/SessionProfile';\r\nimport {NavigationProfile} from './Profiles/NavigationProfile';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport Config from './Config';\r\n\r\n/**\r\n * XAPI Builder Class\r\n *  하위 function별 기능 정의\r\n *  + initializeXAPI : activity data 초기화 처리\r\n *  + validateActivityData : activity data validation (필수값과 format 체크)\r\n *  + setActor : XAPI의 actor property set\r\n *  + setContext : XAPI의 context property set\r\n *  + setXAPIData : profile별 action data set\r\n *  + getProfile : profile별 객체 생성 및 관리, verb, activity, context, result property set\r\n *  + validateActionData : action data validation (필수값과 format 체크)\r\n *  + getStatement : statement set\r\n *  + getConfigData : config data (LRS Connection info. 등) return\r\n *  + getUuid : uuid 생성 및 return\r\n *  + getStatementObj : set된 statement return\r\n */\r\nexport class xAPIBuilder {\r\n    /** status Code */\r\n    public RET_CODE: object;\r\n\r\n    /** XAPI property */\r\n    public Actor: ActorObj;\r\n    public Context: ContextObj;\r\n    public Attachment: AttachmentObj;\r\n    public Profile: object;    \r\n    \r\n    private _profiles : Array<object>;\r\n    private _actor : ActorObj;\r\n    private _context : ContextObj;\r\n    private _activity : object;\r\n    private _verb : VerbObj;\r\n    private _extensions : object;\r\n    private _result : ResultObj;\r\n    private _attachments : AttachmentObj;\r\n    private _statement : StatementObj;\r\n\r\n    /** 전달받는 Object Data */\r\n    private _activityData  : object;\r\n    private _actionData  : object;\r\n\r\n    /** 처리 결과 코드 */\r\n    private resultCode: object;\r\n\r\n    /** registration 초기 값 */\r\n    private registrationVal: string = uuidv4();\r\n\r\n    /** profile별 Obejct */\r\n    private mediaProfileObjInMember: object;\r\n    private sessionProfileObjInMember: object;\r\n    private navigationProfileObjInMember: object;\r\n\r\n    public emailRegExp = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\n    constructor(){\r\n        this.RET_CODE = [\r\n            {code:200, status:\"SUCCESS\"},\r\n            {code:300, status:\"MISSING_PARAMETER_REQUIRED\", data:\"\"},\r\n            {code:310, status:\"MISMATCH_PARAMETER_FORMAT\", data:\"\"},\r\n            {code:404, status:\"NOT_FOUND\"},\r\n            {code:500, status:\"INTERNAL_ERROR\"}\r\n        ]\r\n        this._profiles = [];\r\n    }\r\n\r\n    /** \r\n     * XAPI initialize\r\n     * + activity data validation\r\n     * + statement 데이터 중 actor와 context 구성\r\n     * @param data activity data\r\n     * @returns resultCode\r\n     */\r\n    public initializeXAPI(data: object){\r\n        try {\r\n            if(data != null && data != {}){\r\n                this.resultCode = this.RET_CODE[0];\r\n                this.resultCode = this.validateActivityData(data);\r\n                if(this.resultCode['code'] == 200){\r\n                    this.setActor(data); // set actor Property\r\n                    this.setContext(data); // set context Property\r\n\r\n                }\r\n            }\r\n        } catch(e){\r\n            this.resultCode = this.RET_CODE[4];\r\n            console.log('Error:', e);\r\n        }\r\n        return this.resultCode;\r\n    }\r\n\r\n    /** \r\n     * Activity Data Validation\r\n     * + required property에 대한 validation\r\n     * + property의 존재 여부와 format 체크\r\n     * @param data activity data\r\n     * @returns resultCode\r\n     */\r\n    private validateActivityData(_activityData : object): object {\r\n        let resultCode = this.RET_CODE[0];\r\n\r\n        /** actor Property Validation */\r\n        if(!_activityData.hasOwnProperty('actor')){\r\n            resultCode = this.RET_CODE[1];\r\n            resultCode['data'] = \"parameter actor is missing\";\r\n        } else if(!_activityData['actor'].hasOwnProperty('id') && !_activityData['actor'].hasOwnProperty('account')){\r\n            resultCode = this.RET_CODE[1];\r\n            resultCode['data'] = \"parameter actor.id or actor.account is missing\";\r\n        } else if(_activityData['actor'].hasOwnProperty('account')){\r\n            if(!_activityData['actor']['account'].hasOwnProperty('homePage') || !_activityData['actor']['account'].hasOwnProperty('name')){\r\n                resultCode = this.RET_CODE[1];\r\n                resultCode['data'] = \"parameter actor.account.homePage or parameter actor.account.name is missing\";\r\n            } else {\r\n                if(!/^http[s]?:/.test(_activityData['actor']['account']['homePage'])){\r\n                    resultCode = this.RET_CODE[2];\r\n                    resultCode['data'] = \"parameter actor.account.homePage format is mismatch\";\r\n                }\r\n            }\r\n        } else if(_activityData['actor'].hasOwnProperty('id')){\r\n            if(!this.emailRegExp.test(_activityData['actor']['id']) && !/^[0-9a-f]{40}$/i.test(_activityData['actor']['id']) && !/^http[s]?:/.test(_activityData['actor']['id'])){\r\n                resultCode = this.RET_CODE[2];\r\n                resultCode['data'] = \"parameter actor.id format is mismatch\";\r\n            }\r\n        }\r\n\r\n        /** Context instructor Property validation */\r\n        if(_activityData.hasOwnProperty('instructor')){\r\n            if(_activityData['instructor'].hasOwnProperty('id')){\r\n                if(!this.emailRegExp.test(_activityData['instructor']['id']) && !/^[0-9a-f]{40}$/i.test(_activityData['instructor']['id']) && !/^http[s]?:/.test(_activityData['instructor']['id'])){\r\n                    resultCode = this.RET_CODE[2];\r\n                    resultCode['data'] = \"parameter instructor.id format is mismatch\";\r\n                }\r\n            } else if(_activityData['instructor'].hasOwnProperty('account')){\r\n                if(!_activityData['instructor']['account'].hasOwnProperty('homePage') || !_activityData['instructor']['account'].hasOwnProperty('name')){\r\n                    resultCode = this.RET_CODE[1];\r\n                    resultCode['data'] = \"parameter instructor.account.homePage or parameter instructor.account.name is missing\";\r\n                } else {\r\n                    if(!/^http[s]?:/.test(_activityData['instructor']['account']['homePage'])){\r\n                        resultCode = this.RET_CODE[2];\r\n                        resultCode['data'] = \"parameter instructor.account.homePage format is mismatch\";\r\n                    }\r\n                }\r\n            } else {\r\n                resultCode = this.RET_CODE[1];\r\n                resultCode['data'] = \"parameter instructor.id or instructor.account is missing\";\r\n            }\r\n        }\r\n\r\n        /** Context team Property validation */\r\n        if(_activityData.hasOwnProperty('team')){\r\n            if(!_activityData['team'].hasOwnProperty('member')){\r\n                resultCode = this.RET_CODE[1];\r\n                resultCode['data'] = \"parameter team.member is missing\";\r\n            }\r\n            if(_activityData['team'].hasOwnProperty('member')){\r\n                for(var item in _activityData['team']['member']){\r\n                    if(!_activityData['team']['member'][item].hasOwnProperty('id') && !_activityData['team']['member'][item].hasOwnProperty('account')){\r\n                        resultCode = this.RET_CODE[1];\r\n                        resultCode['data'] = \"parameter team.member.id or team.member.account is missing\"\r\n                    }\r\n                }\r\n\r\n                for(var item in _activityData['team']['member']){\r\n                    if(!_activityData['team']['member'][item].hasOwnProperty('id') && _activityData['team']['member'][item].hasOwnProperty('account')){\r\n                        if(!_activityData['team']['member'][item]['account'].hasOwnProperty('homePage') || !_activityData['team']['member'][item]['account'].hasOwnProperty('name')){\r\n                            resultCode = this.RET_CODE[1];\r\n                            resultCode['data'] = \"parameter team.member.account.homePage or name is missing\";\r\n                        }\r\n                    }\r\n                }\r\n\r\n                for(var item in _activityData['team']['member']){\r\n                    if(_activityData['team']['member'][item].hasOwnProperty('id')){\r\n                        if(!this.emailRegExp.test(_activityData['team']['member'][item]['id']) && !/^[0-9a-f]{40}$/i.test(_activityData['team']['member'][item]['id']) && !/^http[s]?:/.test(_activityData['team']['member'][item]['id'])){\r\n                            resultCode = this.RET_CODE[2];\r\n                            resultCode['data'] = \"parameter team.member format is mismatch\";\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /** Context parent Property validation */\r\n        if(_activityData.hasOwnProperty('parent')){\r\n            for(var item in _activityData['parent']){\r\n                if(!_activityData['parent'][item].hasOwnProperty('id') || !_activityData['parent'][item].hasOwnProperty('name')){\r\n                    resultCode = this.RET_CODE[1];\r\n                    resultCode['data'] = \"parameter parent.id or parent.name is missing\";\r\n                }\r\n            }\r\n        }\r\n        \r\n        /** Context grouping Property validation */\r\n        if(_activityData.hasOwnProperty('grouping')){\r\n            for(var item in _activityData['grouping']){\r\n                if(!_activityData['grouping'][item].hasOwnProperty('id') || !_activityData['grouping'][item].hasOwnProperty('name')){\r\n                    resultCode = this.RET_CODE[1];\r\n                    resultCode['data'] = \"parameter grouping.id or grouping.name is missing\";\r\n                }\r\n            }\r\n        }\r\n\r\n        /** Context category Property validation */\r\n        if(_activityData.hasOwnProperty('category')){\r\n            for(var item in _activityData['category']){\r\n                if(!_activityData['category'][item].hasOwnProperty('id') || !_activityData['category'][item].hasOwnProperty('name')){\r\n                    resultCode = this.RET_CODE[1];\r\n                    resultCode['data'] = \"parameter category.id or category.name is missing\";\r\n                }\r\n            }\r\n        }\r\n        \r\n        /** Context other Property validation */\r\n        if(_activityData.hasOwnProperty('other')){\r\n            for(var item in _activityData['other']){\r\n                if(!_activityData['other'][item].hasOwnProperty('id') || !_activityData['other'][item].hasOwnProperty('name')){\r\n                    resultCode = this.RET_CODE[1];\r\n                    resultCode['data'] = \"parameter other.id or other.name is missing\";\r\n                }\r\n            }\r\n        }\r\n\r\n        this._activityData = _activityData;\r\n        \r\n        return resultCode;\r\n    }\r\n\r\n    /**\r\n     * statement의 actor property 구성\r\n     * + validation 처리 후 activity data로 actor property set\r\n     * @param _activityData\r\n     */\r\n    private setActor(_activityData: object){\r\n        let key = \"\";\r\n        let value = \"\";\r\n        let account = {};\r\n        let memberArray = [];\r\n        let memberObj = {};\r\n\r\n        this._actor = {\r\n            objectType: \"Agent\",\r\n            name: \"\"\r\n        }\r\n\r\n        let actorNameValue = _activityData['actor']['name']\r\n        this._actor['name'] = actorNameValue;\r\n\r\n        /** set actor id Property */\r\n        if(_activityData['actor'].hasOwnProperty('id')){\r\n            if(this.emailRegExp.test(_activityData['actor']['id'])){\r\n                value = \"mailto:\" + _activityData['actor']['id'];\r\n                this._actor['mbox'] = value;\r\n            } else if(/^[0-9a-f]{40}$/i.test(_activityData['actor']['id']) ){\r\n                value = _activityData['actor']['id'];\r\n                this._actor['mbox_sha1sum'] = value;\r\n            } else if(/^http[s]?:/.test('id')){\r\n                value = _activityData['actor']['id'];\r\n                this._actor['openid'] = value;\r\n            }\r\n        /** set actor account Property */\r\n        } else if(_activityData['actor'].hasOwnProperty('account')){\r\n            key = \"account\";\r\n            account = _activityData['actor']['account'];\r\n            this._actor[key] = account;\r\n        }\r\n\r\n        /** set actor team Property */\r\n        if(_activityData['actor'].hasOwnProperty('team')){\r\n            this._actor['objectType'] =\"Group\";\r\n\r\n            for(var item in _activityData['actor']['team']['member']){\r\n                memberObj = {\r\n                    name: {}\r\n                };\r\n                memberObj['objectType'] = \"Agent\";\r\n                if(_activityData['actor']['team']['member'][item].hasOwnProperty('id')){\r\n                    let teamMemberNamevalue = item['name']\r\n                    \r\n                    if(this.emailRegExp.test(_activityData['actor']['team']['member'][item]['id'])){\r\n                        value = \"mailto:\" + _activityData['actor']['team']['member'][item]['id'];\r\n                        memberObj['mbox'] = value;\r\n                        memberObj['name'] = teamMemberNamevalue;\r\n                    } else if(/^[0-9a-f]{40}$/i.test(_activityData['actor']['team']['member'][item]['id']) ){\r\n                        value = _activityData['actor']['team']['member'][item]['id'];\r\n                        memberObj['mbox_sha1sum'] = value;\r\n                        memberObj['name'] = teamMemberNamevalue;\r\n                    } else if(/^http[s]?:/.test('id')){\r\n                        value = _activityData['actor']['team']['member'][item]['id'];\r\n                        memberObj['openid'] = value;\r\n                        memberObj['name'] = teamMemberNamevalue;\r\n                    }\r\n                } else if(_activityData['actor']['team']['member'][item].hasOwnProperty('account')){\r\n                    let accountNameValue = _activityData['actor']['team']['member'][item]['account']['name']\r\n                    \r\n                    key = \"account\";\r\n                    account = _activityData['actor']['team']['member'][item]['account'];\r\n                    memberObj[key] = account;\r\n                    memberObj['name'] = accountNameValue;\r\n                }\r\n\r\n                memberArray.push(memberObj);\r\n            }\r\n            \r\n            key = \"member\";\r\n            this._actor[key] = memberArray;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * statement의 context property 구성\r\n     * + validation 처리 후 activity data로 context property set\r\n     * @param _activityData\r\n     */\r\n    private setContext(_activityData: object){\r\n        let key = \"\";\r\n        let value = \"\";\r\n        let account = {};\r\n        let instructorObj = {};\r\n        let teamObj = {};\r\n        let memberArray = [];\r\n        let memberObj = {};\r\n        let contextActivitiesObj = {};\r\n        this._context = {};\r\n        \r\n        /** sessionId가 있는 경우 registration data를 sessionId로 교체 */\r\n        if(!_activityData.hasOwnProperty('sessionId')){\r\n            this._context['registration'] = this.registrationVal;\r\n        } else {\r\n            this._context['registration'] = _activityData['sessionId'];\r\n        }\r\n\r\n        /** set context instructor Property */\r\n        if(_activityData.hasOwnProperty('instructor')){\r\n            instructorObj = {\r\n                objectType: \"Agent\",\r\n                name: \"\"\r\n            }\r\n\r\n            if(_activityData['instructor'].hasOwnProperty('name')){\r\n                let instructorNameValue = _activityData['instructor']['name'];\r\n                instructorObj['name'] = instructorNameValue;\r\n            }\r\n\r\n            if(_activityData['instructor'].hasOwnProperty('id')){\r\n                if(this.emailRegExp.test(_activityData['instructor']['id'])){\r\n                    value = \"mailto:\" + _activityData['instructor']['id'];\r\n                    instructorObj['mbox'] = value;\r\n                } else if(/^[0-9a-f]{40}$/i.test(_activityData['instructor']['id']) ){\r\n                    value = _activityData['instructor']['id'];\r\n                    instructorObj['mbox_sha1sum'] = value;\r\n                } else {\r\n                    value = _activityData['instructor']['id'];\r\n                    instructorObj['openid'] = value;\r\n                }\r\n            } else if(_activityData['instructor'].hasOwnProperty('account')){\r\n                key = \"account\";\r\n                account = _activityData['instructor']['account'];\r\n                instructorObj[key] = account;\r\n            }\r\n\r\n            key = \"instructor\";\r\n            this._context[key] = instructorObj;\r\n        }\r\n\r\n        /** set context team Property */\r\n        if(_activityData.hasOwnProperty('team')){\r\n            teamObj = {\r\n                objectType: \"Group\",\r\n                name: {}\r\n            };\r\n\r\n            let teamNameValue = _activityData['team']['name'];\r\n            teamObj['name'] = teamNameValue;\r\n\r\n            for(var item in _activityData['team']['member']){\r\n                memberObj = {\r\n                    name: {}\r\n                };\r\n                let teamMemberNameValue = _activityData['team']['member'][item]['name'];\r\n\r\n                if(_activityData['team']['member'][item].hasOwnProperty('id')){\r\n                    if(this.emailRegExp.test(_activityData['team']['member'][item]['id'])){\r\n                        value = \"mailto:\" + _activityData['team']['member'][item]['id'];\r\n                        memberObj['mbox'] = value;\r\n                        memberObj['name'] = teamMemberNameValue;\r\n                    } else if(/^[0-9a-f]{40}$/i.test(_activityData['team']['member'][item]['id']) ){\r\n                        value = _activityData['team']['member'][item]['id'];\r\n                        memberObj['mbox_sha1sum'] = value;\r\n                        memberObj['name'] = teamMemberNameValue;\r\n                    } else {\r\n                        value = _activityData['team']['member'][item]['id'];\r\n                        memberObj['openid'] = value;\r\n                        memberObj['name'] = teamMemberNameValue;\r\n                    }\r\n                } else if(_activityData['team']['member'][item].hasOwnProperty('account')){\r\n                    let accountNameKey = _activityData['team']['member'][item]['name']['language'];\r\n                    let accountNameValue = _activityData['team']['member'][item]['name']['value'];\r\n                    \r\n                    key = \"account\";\r\n                    account = _activityData['team']['member'][item]['account'];\r\n                    memberObj[key] = account;\r\n                    memberObj['name'][accountNameKey] = accountNameValue;\r\n                    memberObj['name'] = teamMemberNameValue;\r\n                }\r\n                memberArray.push(memberObj);\r\n            }\r\n            \r\n            teamObj['member'] = memberArray;\r\n\r\n            key = \"team\";\r\n            this._context[key] = teamObj;\r\n        }\r\n\r\n        /** set context parent Property */\r\n        if(_activityData.hasOwnProperty('parent')){\r\n            let parentArray = [];\r\n\r\n            for(var item in _activityData['parent']){\r\n                let parentNameKey = _activityData['parent'][item]['name']['language'];\r\n                let parentNameValue = _activityData['parent'][item]['name']['value'];\r\n    \r\n                let parentDescriptionKey = _activityData['parent'][item]['description']['language'];\r\n                let parentDescriptionValue = _activityData['parent'][item]['description']['value'];\r\n                \r\n                let parentArrayObj = {\r\n                    id: _activityData['parent'][item]['id'],\r\n                    objectType: \"Activity\",\r\n                    definition: {\r\n                        name: {},\r\n                        description: {}\r\n                    }\r\n                };\r\n                \r\n                parentArrayObj['definition']['name'][parentNameKey] = parentNameValue;\r\n                parentArrayObj['definition']['description'][parentDescriptionKey] = parentDescriptionValue;\r\n\r\n                parentArray.push(parentArrayObj);\r\n            }\r\n            \r\n            key = \"parent\";\r\n            contextActivitiesObj[key] = parentArray;\r\n        }\r\n\r\n        /** set context grouping Property */\r\n        if(_activityData.hasOwnProperty('grouping')){\r\n            let groupingArray = [];\r\n\r\n            for(var item in _activityData['grouping']){\r\n                let groupingNameKey = _activityData['grouping'][item]['name']['language'];\r\n                let groupingNameValue = _activityData['grouping'][item]['name']['value'];\r\n    \r\n                let groupingDescriptionKey = _activityData['grouping'][item]['description']['language'];\r\n                let groupingDescriptionValue = _activityData['grouping'][item]['description']['value'];\r\n                \r\n                let groupingArrayObj = {\r\n                    id: _activityData['grouping'][item]['id'],\r\n                    objectType: \"Activity\",\r\n                    definition: {\r\n                        name: {},\r\n                        description: {}\r\n                    }\r\n                };\r\n                \r\n                groupingArrayObj['definition']['name'][groupingNameKey] = groupingNameValue;\r\n                groupingArrayObj['definition']['description'][groupingDescriptionKey] = groupingDescriptionValue;\r\n\r\n                groupingArray.push(groupingArrayObj);\r\n            }\r\n\r\n            key = \"grouping\";\r\n            contextActivitiesObj[key] = groupingArray;\r\n        }\r\n\r\n        /** set context other Property */\r\n        if(_activityData.hasOwnProperty('other')){\r\n            let otherArray = [];\r\n\r\n            for(var item in _activityData['other']){\r\n                let otherNameKey = _activityData['other'][item]['name']['language'];\r\n                let otherNameValue = _activityData['other'][item]['name']['value'];\r\n    \r\n                let otherDescriptionKey = _activityData['other'][item]['description']['language'];\r\n                let otherDescriptionValue = _activityData['other'][item]['description']['value'];\r\n                \r\n                let otherArrayObj = {\r\n                    id: _activityData['other'][item]['id'],\r\n                    objectType: \"Activity\",\r\n                    definition: {\r\n                        name: {},\r\n                        description: {}\r\n                    }\r\n                };\r\n                \r\n                otherArrayObj['definition']['name'][otherNameKey] = otherNameValue;\r\n                otherArrayObj['definition']['description'][otherDescriptionKey] = otherDescriptionValue;\r\n\r\n                otherArray.push(otherArrayObj);\r\n            }\r\n\r\n            key = \"other\";\r\n            contextActivitiesObj[key] = otherArray;\r\n        }\r\n        \r\n        if(Object.keys(contextActivitiesObj).length !== 0){\r\n            this._context['contextActivities'] = contextActivitiesObj;\r\n        }\r\n\r\n        /** set context platform Property */\r\n        if(_activityData.hasOwnProperty('platform')) {\r\n            this._context['platform'] = _activityData['platform'];\r\n        }\r\n    }\r\n\r\n    /** \r\n     * profile별 action data 구성\r\n     * + profile의 getProfile과 getStatement을 호출하여 statement 구성\r\n     * + profile의 validateProfile을 호출하여 statement의 property들을 검증\r\n     * @param _actionData\r\n     * @returns resultCode\r\n     */\r\n    public setXAPIData(_actionData: object): object {\r\n        let dict = new xAPIDictionary();\r\n        let verbDictSession = dict.verb.filter(data => data.hasOwnProperty('session'));\r\n        let verbDictNavigation = dict.verb.filter(data => data.hasOwnProperty('navigation'));\r\n        let verbDictMedia = dict.verb.filter(data => data.hasOwnProperty('media'));\r\n\r\n        this.resultCode = this.validateActionData(_actionData);\r\n        if(this.resultCode['code'] == 200){\r\n            this.getProfile(_actionData);\r\n            this.getStatement(this._actor, this._verb, this._activity);\r\n\r\n            this._statement['context'] = this._context;\r\n            this._statement['context']['extensions'] = this._extensions['extensions'];\r\n            \r\n            this.setAttachments(_actionData);\r\n            \r\n            if(this._result != undefined){\r\n                let resultKey = 'result';\r\n                this._statement[resultKey] = this._result;\r\n            }\r\n\r\n            this._statement['timestamp'] = new Date().toISOString();\r\n            this._statement['version'] = Config.version;\r\n            \r\n            switch (this._statement['verb']['id']) {\r\n                case verbDictSession[0]['session'][\"logged-in\"].id:\r\n                case verbDictSession[0]['session'][\"logged-out\"].id:\r\n                case verbDictSession[0]['session'][\"timed-out\"].id:\r\n                case verbDictSession[0]['session'][\"paused\"].id:\r\n                case verbDictSession[0]['session'][\"resumed\"].id:\r\n                case verbDictSession[0]['session'][\"attempted\"].id:\r\n                case verbDictSession[0]['session'][\"entered\"].id:\r\n                case verbDictSession[0]['session'][\"leaved\"].id:\r\n                case verbDictSession[0]['session'][\"attended\"].id:\r\n                    if(this.sessionProfileObjInMember !== undefined && Object.keys(this.sessionProfileObjInMember[0])[0] == 'session') {\r\n                        if(this.sessionProfileObjInMember[0]['session'].validateProfile(this._statement)){\r\n                            this.resultCode = this.RET_CODE[0];\r\n                        } else {\r\n                            this.resultCode = this.RET_CODE[1];\r\n                            this.resultCode['data'] = \"validation statement Fail\";\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case verbDictNavigation[0]['navigation'][\"moved-to\"].id:\r\n                case verbDictNavigation[0]['navigation'][\"next\"].id:\r\n                case verbDictNavigation[0]['navigation'][\"previous\"].id:\r\n                case verbDictNavigation[0]['navigation'][\"clicked\"].id:\r\n                case verbDictNavigation[0]['navigation'][\"viewed\"].id:\r\n                case verbDictNavigation[0]['navigation'][\"popped-up\"].id:\r\n                case verbDictNavigation[0]['navigation'][\"opened\"].id:\r\n                case verbDictNavigation[0]['navigation'][\"closed\"].id:\r\n                    if(this.navigationProfileObjInMember !== undefined && Object.keys(this.navigationProfileObjInMember[0])[0] == 'navigation') {\r\n                        if(this.navigationProfileObjInMember[0]['navigation'].validateProfile(this._statement)){\r\n                            this.resultCode = this.RET_CODE[0];\r\n                        } else {\r\n                            this.resultCode = this.RET_CODE[1];\r\n                            this.resultCode['data'] = \"validation statement Fail\";\r\n                        }\r\n                    }\r\n                    break;\r\n                \r\n                case verbDictMedia[0]['media'].initialized.id:\r\n                case verbDictMedia[0]['media'].played.id:\r\n                case verbDictMedia[0]['media'].paused.id:\r\n                case verbDictMedia[0]['media'].seeked.id:\r\n                case verbDictMedia[0]['media'].completed.id:\r\n                case verbDictMedia[0]['media'].terminated.id:\r\n                case verbDictMedia[0]['media'].interacted.id:\r\n                    if(this.mediaProfileObjInMember !== undefined && Object.keys(this.mediaProfileObjInMember[0])[0] == 'media') {\r\n                        if(this.mediaProfileObjInMember[0]['media'].validateProfile(this._statement)){\r\n                            this.resultCode = this.RET_CODE[0];\r\n                        } else {\r\n                            this.resultCode = this.RET_CODE[1];\r\n                            this.resultCode['data'] = \"validation statement Fail\";\r\n                        }\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return this.resultCode;\r\n    }\r\n\r\n    /**\r\n     * 데이터 제공\r\n     * + 호출 시 config 설정 데이터 return\r\n     * @returns configData\r\n     */\r\n    public getConfigData(){\r\n        let configData = {\r\n            endpoint: Config.endpoint,\r\n            username: Config.key,\r\n            password: Config.secret\r\n        }\r\n        \r\n        return configData;\r\n    }\r\n\r\n    /**\r\n     * 데이터 제공\r\n     * + 호출 시 전체 statement return\r\n     * @returns _statement\r\n    */\r\n    public getStatementObj(){\r\n        return this._statement;\r\n    }\r\n\r\n    /**\r\n     * Action Data Validation\r\n     * + required property에 대한 validation\r\n     * + property의 존재 여부와 format 체크\r\n     * @param _actionData \r\n     * @returns resultCode\r\n     */\r\n    private validateActionData(_actionData): object {\r\n        let resultCode = this.RET_CODE[0];\r\n\r\n        if(!_actionData.hasOwnProperty('object') && !_actionData.hasOwnProperty['object']('type') && !_actionData.hasOwnProperty['object']('id')){\r\n            resultCode = this.RET_CODE[1];\r\n            resultCode['data'] = \"parameter object.type or object.id is missing\";\r\n        } else if(!_actionData.hasOwnProperty('verb')){\r\n            resultCode = this.RET_CODE[1];\r\n            resultCode['data'] = \"parameter verb is missing\";\r\n        }\r\n\r\n        return resultCode;\r\n    }\r\n    \r\n    /**\r\n     * profile별로 object life cycle 관리\r\n     * + profile의 object 존재 여부 체크 후 object 생성 관리\r\n     * + profile의 getVerb, getActivity, getContext, getResult를 호출하여 XAPI property 구성\r\n     * @param _actionData \r\n     * @returns _profiles\r\n     */\r\n    private getProfile(_actionData): object {\r\n        let profilesObj = {};\r\n\r\n        try {\r\n            switch (_actionData['object']['type'].toLowerCase()){\r\n                /** media profile */\r\n                case 'video':\r\n                case 'audio':\r\n                    if(this._profiles.filter(data => data.hasOwnProperty('media')).length == 0){\r\n                        let mediaProfileObj = new MediaProfile();\r\n                        profilesObj['media'] = mediaProfileObj;\r\n                        this._profiles.push(profilesObj);\r\n                    }\r\n                    \r\n                    this.mediaProfileObjInMember = this._profiles.filter(data => data.hasOwnProperty('media'));\r\n\r\n                    let getMediaVerbReturn = this.mediaProfileObjInMember[0]['media'].getVerb(_actionData['verb']);\r\n                    this._verb = getMediaVerbReturn;\r\n\r\n                    let getMediaActivityReturn = this.mediaProfileObjInMember[0]['media'].getActivity(\r\n                        _actionData['object']['type'],\r\n                        _actionData['object']['id'],\r\n                        _actionData['object']['name'],\r\n                        _actionData['object']['description']\r\n                        );\r\n                    \r\n                    this._activity = getMediaActivityReturn;\r\n                    \r\n                    let getMediaExtensionsReturn = this.mediaProfileObjInMember[0]['media'].getContext(_actionData['extension']);\r\n\r\n                    this._extensions = getMediaExtensionsReturn;\r\n                    \r\n                    if(_actionData['result'] != undefined){\r\n                        let getMediaResultReturn = this.mediaProfileObjInMember[0]['media'].getResult(\r\n                            _actionData['verb'],\r\n                            _actionData['result'],\r\n                            _actionData['extension']\r\n                            );\r\n                        if(getMediaResultReturn != undefined){\r\n                            this._result = getMediaResultReturn;\r\n                        }\r\n                    } else if(_actionData['verb'] != 'initialized'){\r\n                        let getMediaResultReturn = this.mediaProfileObjInMember[0]['media'].getResult(\r\n                            _actionData['verb'],\r\n                            _actionData['result'],\r\n                            _actionData['extension']\r\n                            );\r\n                        \r\n                        if(getMediaResultReturn != undefined){\r\n                            this._result = getMediaResultReturn;\r\n                        }\r\n                    }\r\n                    \r\n                    break;\r\n                \r\n                /** session profile */\r\n                case 'software-application':\r\n                case 'group-activity':\r\n                    if(this._profiles.filter(data => data.hasOwnProperty('session')).length == 0){\r\n                        let sessionProfileObj = new SessionProfile();\r\n                        profilesObj['session'] = sessionProfileObj;\r\n                        this._profiles.push(profilesObj);\r\n                    }\r\n                    \r\n                    this.sessionProfileObjInMember = this._profiles.filter(data => data.hasOwnProperty('session'));\r\n                    \r\n                    let getSessionVerbReturn = this.sessionProfileObjInMember[0]['session'].getVerb(_actionData['verb']);\r\n                    this._verb = getSessionVerbReturn;\r\n\r\n                    let getSessionActivityReturn = this.sessionProfileObjInMember[0]['session'].getActivity(\r\n                        _actionData['object']['type'],\r\n                        _actionData['object']['id'],\r\n                        _actionData['object']['name'],\r\n                        _actionData['object']['description']\r\n                        );\r\n                    \r\n                    this._activity = getSessionActivityReturn;\r\n                    \r\n                    let getSessionExtensionsReturn = this.sessionProfileObjInMember[0]['session'].getContext(_actionData['extension']);\r\n\r\n                    this._extensions = getSessionExtensionsReturn;\r\n                    \r\n                    if(_actionData['result'] != undefined){\r\n                        let getSessionResultReturn = this.sessionProfileObjInMember[0]['session'].getResult(\r\n                            _actionData['verb'],\r\n                            _actionData['result'],\r\n                            _actionData['extension']\r\n                            );\r\n                        if(getSessionResultReturn != undefined){\r\n                            this._result = getSessionResultReturn;\r\n                        }\r\n                    } else {\r\n                        let getSessionResultReturn = this.sessionProfileObjInMember[0]['session'].getResult(\r\n                            _actionData['verb'],\r\n                            _actionData['result'],\r\n                            _actionData['extension']\r\n                            );\r\n                        \r\n                        if(getSessionResultReturn != undefined){\r\n                            this._result = getSessionResultReturn;\r\n                        }\r\n                    }\r\n                    \r\n                    break;\r\n                \r\n                /** navigation profile */\r\n                case 'document':\r\n                case 'webpage':\r\n                case 'menu':\r\n                case 'toc':\r\n                    if(this._profiles.filter(data => data.hasOwnProperty('navigation')).length == 0){\r\n                        let navigationProfileObj = new NavigationProfile();\r\n                        profilesObj['navigation'] = navigationProfileObj;\r\n                        this._profiles.push(profilesObj);\r\n                    }\r\n                    \r\n                    this.navigationProfileObjInMember = this._profiles.filter(data => data.hasOwnProperty('navigation'));\r\n\r\n                    let getNavigationVerbReturn = this.navigationProfileObjInMember[0]['navigation'].getVerb(_actionData['verb']);\r\n                    this._verb = getNavigationVerbReturn;\r\n\r\n                    let getNavigationActivityReturn = this.navigationProfileObjInMember[0]['navigation'].getActivity(\r\n                        _actionData['object']['type'],\r\n                        _actionData['object']['id'],\r\n                        _actionData['object']['name'],\r\n                        _actionData['object']['description']\r\n                        );\r\n                    \r\n                    this._activity = getNavigationActivityReturn;\r\n                    \r\n                    let getNavigationExtensionsReturn = this.navigationProfileObjInMember[0]['navigation'].getContext(_actionData['extension']);\r\n\r\n                    this._extensions = getNavigationExtensionsReturn;\r\n                    \r\n                    if(_actionData['result'] != undefined){\r\n                        let getNavigationResultReturn = this.navigationProfileObjInMember[0]['navigation'].getResult(\r\n                            _actionData['verb'],\r\n                            _actionData['result'],\r\n                            _actionData['extension']\r\n                            );\r\n                        if(getNavigationResultReturn != undefined){\r\n                            this._result = getNavigationResultReturn;\r\n                        }\r\n                    } else {\r\n                        let getNavigationResultReturn = this.navigationProfileObjInMember[0]['navigation'].getResult(\r\n                            _actionData['verb'],\r\n                            _actionData['result'],\r\n                            _actionData['extension']\r\n                            );\r\n                        \r\n                        if(getNavigationResultReturn != undefined){\r\n                            this._result = getNavigationResultReturn;\r\n                        }\r\n                    }\r\n                    \r\n                    break;\r\n            }\r\n        } catch(e){\r\n            this.resultCode = this.RET_CODE[4];\r\n            console.log('Error:', e);\r\n        }\r\n\r\n        return this._profiles;\r\n    }\r\n\r\n    /**\r\n     * statement 구성\r\n     * + statement 중 actor, verb, object property 구성\r\n     * @param _actor \r\n     * @param _verb \r\n     * @param _activity \r\n     * @returns _statement\r\n     */\r\n    private getStatement(_actor, _verb, _activity): object {\r\n        let statementObj: StatementObj = {\r\n            id: \"\",\r\n            actor: {\r\n                objectType: \"Agent\",\r\n                name: \"\",\r\n                mbox: \"\"\r\n            },\r\n            verb: {\r\n                id: \"\",\r\n                display: {}\r\n            },\r\n            object: {\r\n                id:\"\",\r\n                objectType: \"Activity\"\r\n            }\r\n        };\r\n        \r\n        statementObj['actor'] = _actor;\r\n        statementObj['verb'] = _verb;\r\n        statementObj['object'] = _activity;\r\n\r\n        this._statement = statementObj;\r\n\r\n        return this._statement;\r\n    }\r\n\r\n    /**\r\n     * statement 구성\r\n     * + statement 중 attachments property 구성\r\n     * @param _actionData \r\n     * @returns _statement\r\n     */\r\n    private setAttachments(_actionData): object {\r\n        if(_actionData.hasOwnProperty('attachments')){\r\n            this._statement = _actionData['attachments'];\r\n        }\r\n\r\n        return this._statement;\r\n    }\r\n\r\n    /**\r\n     * uuid 생성\r\n     * + 호출 시 생성된 uuid return\r\n     * @returns uuid\r\n     */\r\n    public getUuid(){\r\n        return uuidv4();\r\n    }\r\n}\r\n\r\n/** actor type */\r\ninterface ActorObj {\r\n    objectType: string,\r\n    name: string,\r\n    member?: MemberObj\r\n    mbox?: string,\r\n    mbox_sha1sum?:string,\r\n    openid?: string,\r\n    account?: {\r\n        homePage: string,\r\n        name: object\r\n    }\r\n}\r\n\r\n/** member type */\r\ninterface MemberObj {\r\n    objectType: string,\r\n    name: string,\r\n    mbox?: string,\r\n    mbox_sha1sum?:string,\r\n    openid?: string,\r\n    account?: {\r\n        homePage: string,\r\n        name: object\r\n    }\r\n}\r\n\r\n/** verb type */\r\ninterface VerbObj {\r\n    id: string,\r\n    display: object //Language Map\r\n}\r\n\r\n/** object type */\r\ninterface ObjectObj { //The Object of a Statement can be an Activity, Agent/Group, SubStatement, or Statement\r\n    objectType?: string,\r\n    id: string,\r\n    definition?: {\r\n        name?: object,\r\n        description?: object, //Language Map\r\n        type?: string,\r\n        moreInfo?: string,\r\n        extensions?: object\r\n    }\r\n}\r\n\r\n/** result type */\r\ninterface ResultObj {\r\n    score?: {\r\n        scaled?: number,\r\n        raw?: number,\r\n        min?: number,\r\n        max?: number\r\n    },\r\n    success?: boolean,\r\n    completion?: boolean,\r\n    response?: string,\r\n    duration?: string,\r\n    extensions?: object\r\n}\r\n\r\n/** context type */\r\ninterface ContextObj {\r\n    registration?: string,\r\n    instructor?: ActorObj,\r\n    team?: MemberObj,\r\n    contextActivities?: ContextActivitiesObj,\r\n    revision?: string,\r\n    platform?: string,\r\n    language?: string,\r\n    statement?: string,\r\n    extensions?: object\r\n}\r\n\r\n/** contextActivities type */\r\ninterface ContextActivitiesObj {\r\n    parent?: ContextActivitiesTypesObj,\r\n    grouping?: ContextActivitiesTypesObj,\r\n    category?: ContextActivitiesTypesObj,\r\n    other?: ContextActivitiesTypesObj\r\n}\r\n\r\n/** contextActivities child type */\r\ninterface ContextActivitiesTypesObj {\r\n    id?: string,\r\n    objectType?: string,\r\n    definition?: {\r\n        name: object,\r\n        description: object, //Language Map\r\n        type?: string\r\n    }\r\n}\r\n\r\n/** attachment type */\r\ninterface AttachmentObj {\r\n    usageType: string,\r\n    display: object //Language Map\r\n    description?: object,\r\n    contentType: string,\r\n    length: number,\r\n    sha2: string\r\n    fileUrl?: string\r\n}\r\n\r\n/** statement type */\r\ninterface StatementObj {\r\n    id: string,\r\n    actor: ActorObj,\r\n    verb: VerbObj,\r\n    object: ObjectObj,\r\n    result?: ResultObj,\r\n    context?: ContextObj,\r\n    timestamp?: string,\r\n    version?: string,\r\n    attachments?: AttachmentObj\r\n}","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(304);\n"],"sourceRoot":""}